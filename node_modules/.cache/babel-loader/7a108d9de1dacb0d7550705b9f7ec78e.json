{"ast":null,"code":"/**\n * react-location\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport * as React from 'react';\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _extends$1() {\n  _extends$1 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends$1.apply(this, arguments);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar r,\n    B = r || (r = {});\nB.Pop = \"POP\";\nB.Push = \"PUSH\";\nB.Replace = \"REPLACE\";\nvar C = \"production\" !== process.env.NODE_ENV ? function (b) {\n  return Object.freeze(b);\n} : function (b) {\n  return b;\n};\n\nfunction D(b, h) {\n  if (!b) {\n    \"undefined\" !== typeof console && console.warn(h);\n\n    try {\n      throw Error(h);\n    } catch (k) {}\n  }\n}\n\nfunction E(b) {\n  b.preventDefault();\n  b.returnValue = \"\";\n}\n\nfunction F() {\n  var b = [];\n  return {\n    get length() {\n      return b.length;\n    },\n\n    push: function push(h) {\n      b.push(h);\n      return function () {\n        b = b.filter(function (k) {\n          return k !== h;\n        });\n      };\n    },\n    call: function call(h) {\n      b.forEach(function (k) {\n        return k && k(h);\n      });\n    }\n  };\n}\n\nfunction H() {\n  return Math.random().toString(36).substr(2, 8);\n}\n\nfunction I(b) {\n  var h = b.pathname,\n      k = b.search;\n  b = b.hash;\n  return (void 0 === h ? \"/\" : h) + (void 0 === k ? \"\" : k) + (void 0 === b ? \"\" : b);\n}\n\nfunction J(b) {\n  var h = {};\n\n  if (b) {\n    var k = b.indexOf(\"#\");\n    0 <= k && (h.hash = b.substr(k), b = b.substr(0, k));\n    k = b.indexOf(\"?\");\n    0 <= k && (h.search = b.substr(k), b = b.substr(0, k));\n    b && (h.pathname = b);\n  }\n\n  return h;\n}\n\nfunction createBrowserHistory(b) {\n  function h() {\n    var c = p.location,\n        a = m.state || {};\n    return [a.idx, C({\n      pathname: c.pathname,\n      search: c.search,\n      hash: c.hash,\n      state: a.usr || null,\n      key: a.key || \"default\"\n    })];\n  }\n\n  function k(c) {\n    return \"string\" === typeof c ? c : I(c);\n  }\n\n  function x(c, a) {\n    void 0 === a && (a = null);\n    return C(_extends({}, q, \"string\" === typeof c ? J(c) : c, {\n      state: a,\n      key: H()\n    }));\n  }\n\n  function z(c) {\n    t = c;\n    c = h();\n    v = c[0];\n    q = c[1];\n    d.call({\n      action: t,\n      location: q\n    });\n  }\n\n  function A(c, a) {\n    function e() {\n      A(c, a);\n    }\n\n    var l = r.Push,\n        g = x(c, a);\n\n    if (!f.length || (f.call({\n      action: l,\n      location: g,\n      retry: e\n    }), !1)) {\n      var n = [{\n        usr: g.state,\n        key: g.key,\n        idx: v + 1\n      }, k(g)];\n      g = n[0];\n      n = n[1];\n\n      try {\n        m.pushState(g, \"\", n);\n      } catch (G) {\n        p.location.assign(n);\n      }\n\n      z(l);\n    }\n  }\n\n  function y(c, a) {\n    function e() {\n      y(c, a);\n    }\n\n    var l = r.Replace,\n        g = x(c, a);\n    f.length && (f.call({\n      action: l,\n      location: g,\n      retry: e\n    }), 1) || (g = [{\n      usr: g.state,\n      key: g.key,\n      idx: v\n    }, k(g)], m.replaceState(g[0], \"\", g[1]), z(l));\n  }\n\n  function w(c) {\n    m.go(c);\n  }\n\n  void 0 === b && (b = {});\n  b = b.window;\n  var p = void 0 === b ? document.defaultView : b,\n      m = p.history,\n      u = null;\n  p.addEventListener(\"popstate\", function () {\n    if (u) f.call(u), u = null;else {\n      var c = r.Pop,\n          a = h(),\n          e = a[0];\n      a = a[1];\n      if (f.length) {\n        if (null != e) {\n          var l = v - e;\n          l && (u = {\n            action: c,\n            location: a,\n            retry: function retry() {\n              w(-1 * l);\n            }\n          }, w(l));\n        } else \"production\" !== process.env.NODE_ENV ? D(!1, \"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.\") : void 0;\n      } else z(c);\n    }\n  });\n  var t = r.Pop;\n  b = h();\n  var v = b[0],\n      q = b[1],\n      d = F(),\n      f = F();\n  null == v && (v = 0, m.replaceState(_extends({}, m.state, {\n    idx: v\n  }), \"\"));\n  return {\n    get action() {\n      return t;\n    },\n\n    get location() {\n      return q;\n    },\n\n    createHref: k,\n    push: A,\n    replace: y,\n    go: w,\n    back: function back() {\n      w(-1);\n    },\n    forward: function forward() {\n      w(1);\n    },\n    listen: function listen(c) {\n      return d.push(c);\n    },\n    block: function block(c) {\n      var a = f.push(c);\n      1 === f.length && p.addEventListener(\"beforeunload\", E);\n      return function () {\n        a();\n        f.length || p.removeEventListener(\"beforeunload\", E);\n      };\n    }\n  };\n}\n\nfunction createHashHistory(b) {\n  function h() {\n    var a = J(m.location.hash.substr(1)),\n        e = a.pathname,\n        l = a.search;\n    a = a.hash;\n    var g = u.state || {};\n    return [g.idx, C({\n      pathname: void 0 === e ? \"/\" : e,\n      search: void 0 === l ? \"\" : l,\n      hash: void 0 === a ? \"\" : a,\n      state: g.usr || null,\n      key: g.key || \"default\"\n    })];\n  }\n\n  function k() {\n    if (t) c.call(t), t = null;else {\n      var a = r.Pop,\n          e = h(),\n          l = e[0];\n      e = e[1];\n      if (c.length) {\n        if (null != l) {\n          var g = q - l;\n          g && (t = {\n            action: a,\n            location: e,\n            retry: function retry() {\n              p(-1 * g);\n            }\n          }, p(g));\n        } else \"production\" !== process.env.NODE_ENV ? D(!1, \"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.\") : void 0;\n      } else A(a);\n    }\n  }\n\n  function x(a) {\n    var e = document.querySelector(\"base\"),\n        l = \"\";\n    e && e.getAttribute(\"href\") && (e = m.location.href, l = e.indexOf(\"#\"), l = -1 === l ? e : e.slice(0, l));\n    return l + \"#\" + (\"string\" === typeof a ? a : I(a));\n  }\n\n  function z(a, e) {\n    void 0 === e && (e = null);\n    return C(_extends({}, d, \"string\" === typeof a ? J(a) : a, {\n      state: e,\n      key: H()\n    }));\n  }\n\n  function A(a) {\n    v = a;\n    a = h();\n    q = a[0];\n    d = a[1];\n    f.call({\n      action: v,\n      location: d\n    });\n  }\n\n  function y(a, e) {\n    function l() {\n      y(a, e);\n    }\n\n    var g = r.Push,\n        n = z(a, e);\n    \"production\" !== process.env.NODE_ENV ? D(\"/\" === n.pathname.charAt(0), \"Relative pathnames are not supported in hash history.push(\" + JSON.stringify(a) + \")\") : void 0;\n\n    if (!c.length || (c.call({\n      action: g,\n      location: n,\n      retry: l\n    }), !1)) {\n      var G = [{\n        usr: n.state,\n        key: n.key,\n        idx: q + 1\n      }, x(n)];\n      n = G[0];\n      G = G[1];\n\n      try {\n        u.pushState(n, \"\", G);\n      } catch (K) {\n        m.location.assign(G);\n      }\n\n      A(g);\n    }\n  }\n\n  function w(a, e) {\n    function l() {\n      w(a, e);\n    }\n\n    var g = r.Replace,\n        n = z(a, e);\n    \"production\" !== process.env.NODE_ENV ? D(\"/\" === n.pathname.charAt(0), \"Relative pathnames are not supported in hash history.replace(\" + JSON.stringify(a) + \")\") : void 0;\n    c.length && (c.call({\n      action: g,\n      location: n,\n      retry: l\n    }), 1) || (n = [{\n      usr: n.state,\n      key: n.key,\n      idx: q\n    }, x(n)], u.replaceState(n[0], \"\", n[1]), A(g));\n  }\n\n  function p(a) {\n    u.go(a);\n  }\n\n  void 0 === b && (b = {});\n  b = b.window;\n  var m = void 0 === b ? document.defaultView : b,\n      u = m.history,\n      t = null;\n  m.addEventListener(\"popstate\", k);\n  m.addEventListener(\"hashchange\", function () {\n    var a = h()[1];\n    I(a) !== I(d) && k();\n  });\n  var v = r.Pop;\n  b = h();\n  var q = b[0],\n      d = b[1],\n      f = F(),\n      c = F();\n  null == q && (q = 0, u.replaceState(_extends({}, u.state, {\n    idx: q\n  }), \"\"));\n  return {\n    get action() {\n      return v;\n    },\n\n    get location() {\n      return d;\n    },\n\n    createHref: x,\n    push: y,\n    replace: w,\n    go: p,\n    back: function back() {\n      p(-1);\n    },\n    forward: function forward() {\n      p(1);\n    },\n    listen: function listen(a) {\n      return f.push(a);\n    },\n    block: function block(a) {\n      var e = c.push(a);\n      1 === c.length && m.addEventListener(\"beforeunload\", E);\n      return function () {\n        e();\n        c.length || m.removeEventListener(\"beforeunload\", E);\n      };\n    }\n  };\n}\n\nfunction createMemoryHistory(b) {\n  function h(d, f) {\n    void 0 === f && (f = null);\n    return C(_extends({}, t, \"string\" === typeof d ? J(d) : d, {\n      state: f,\n      key: H()\n    }));\n  }\n\n  function k(d, f, c) {\n    return !q.length || (q.call({\n      action: d,\n      location: f,\n      retry: c\n    }), !1);\n  }\n\n  function x(d, f) {\n    u = d;\n    t = f;\n    v.call({\n      action: u,\n      location: t\n    });\n  }\n\n  function z(d, f) {\n    var c = r.Push,\n        a = h(d, f);\n    \"production\" !== process.env.NODE_ENV ? D(\"/\" === t.pathname.charAt(0), \"Relative pathnames are not supported in memory history.push(\" + JSON.stringify(d) + \")\") : void 0;\n    k(c, a, function () {\n      z(d, f);\n    }) && (m += 1, p.splice(m, p.length, a), x(c, a));\n  }\n\n  function A(d, f) {\n    var c = r.Replace,\n        a = h(d, f);\n    \"production\" !== process.env.NODE_ENV ? D(\"/\" === t.pathname.charAt(0), \"Relative pathnames are not supported in memory history.replace(\" + JSON.stringify(d) + \")\") : void 0;\n    k(c, a, function () {\n      A(d, f);\n    }) && (p[m] = a, x(c, a));\n  }\n\n  function y(d) {\n    var f = Math.min(Math.max(m + d, 0), p.length - 1),\n        c = r.Pop,\n        a = p[f];\n    k(c, a, function () {\n      y(d);\n    }) && (m = f, x(c, a));\n  }\n\n  void 0 === b && (b = {});\n  var w = b;\n  b = w.initialEntries;\n  w = w.initialIndex;\n  var p = (void 0 === b ? [\"/\"] : b).map(function (d) {\n    var f = C(_extends({\n      pathname: \"/\",\n      search: \"\",\n      hash: \"\",\n      state: null,\n      key: H()\n    }, \"string\" === typeof d ? J(d) : d));\n    \"production\" !== process.env.NODE_ENV ? D(\"/\" === f.pathname.charAt(0), \"Relative pathnames are not supported in createMemoryHistory({ initialEntries }) (invalid entry: \" + JSON.stringify(d) + \")\") : void 0;\n    return f;\n  }),\n      m = Math.min(Math.max(null == w ? p.length - 1 : w, 0), p.length - 1),\n      u = r.Pop,\n      t = p[m],\n      v = F(),\n      q = F();\n  return {\n    get index() {\n      return m;\n    },\n\n    get action() {\n      return u;\n    },\n\n    get location() {\n      return t;\n    },\n\n    createHref: function createHref(d) {\n      return \"string\" === typeof d ? d : I(d);\n    },\n    push: z,\n    replace: A,\n    go: y,\n    back: function back() {\n      y(-1);\n    },\n    forward: function forward() {\n      y(1);\n    },\n    listen: function listen(d) {\n      return v.push(d);\n    },\n    block: function block(d) {\n      return q.push(d);\n    }\n  };\n}\n\nvar _excluded = [\"children\", \"location\"],\n    _excluded2 = [\"location\"],\n    _excluded3 = [\"basepath\", \"routes\"],\n    _excluded4 = [\"to\", \"search\", \"hash\", \"children\", \"target\", \"style\", \"replace\", \"onClick\", \"onMouseEnter\", \"className\", \"getActiveProps\", \"getInactiveProps\", \"activeOptions\", \"preload\", \"disabled\", \"_ref\"],\n    _excluded5 = [\"style\", \"className\"],\n    _excluded6 = [\"style\", \"className\"],\n    _excluded7 = [\"pending\"],\n    _excluded8 = [\"children\"];\n\nfunction _await(value, then, direct) {\n  if (direct) {\n    return then ? then(value) : value;\n  }\n\n  if (!value || !value.then) {\n    value = Promise.resolve(value);\n  }\n\n  return then ? value.then(then) : value;\n}\n\nfunction _catch(body, recover) {\n  try {\n    var result = body();\n  } catch (e) {\n    return recover(e);\n  }\n\n  if (result && result.then) {\n    return result.then(void 0, recover);\n  }\n\n  return result;\n} // Types\n\n\nfunction _empty() {}\n\nfunction _continueIgnored(value) {\n  if (value && value.then) {\n    return value.then(_empty);\n  }\n}\n\nfunction _async(f) {\n  return function () {\n    for (var args = [], i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    try {\n      return Promise.resolve(f.apply(this, args));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n} // Source\n\n\nvar LocationContext = /*#__PURE__*/React.createContext(null);\nvar MatchesContext = /*#__PURE__*/React.createContext(null);\nvar routerContext = /*#__PURE__*/React.createContext(null); // Detect if we're in the DOM\n\nvar isDOM = Boolean(typeof window !== 'undefined' && window.document && window.document.createElement);\nvar useLayoutEffect = isDOM ? React.useLayoutEffect : React.useEffect; // This is the default history object if none is defined\n\nvar createDefaultHistory = function createDefaultHistory() {\n  return isDOM ? createBrowserHistory() : createMemoryHistory();\n};\n\nvar Subscribable = /*#__PURE__*/function () {\n  function Subscribable() {\n    this.listeners = [];\n  }\n\n  var _proto = Subscribable.prototype;\n\n  _proto.subscribe = function subscribe(listener) {\n    var _this = this;\n\n    this.listeners.push(listener);\n    return function () {\n      _this.listeners = _this.listeners.filter(function (x) {\n        return x !== listener;\n      });\n    };\n  };\n\n  _proto.notify = function notify() {\n    this.listeners.forEach(function (listener) {\n      return listener();\n    });\n  };\n\n  return Subscribable;\n}();\n\nvar ReactLocation = /*#__PURE__*/function (_Subscribable) {\n  _inheritsLoose(ReactLocation, _Subscribable); //\n\n\n  function ReactLocation(options) {\n    var _options$stringifySea, _options$parseSearch;\n\n    var _this2;\n\n    _this2 = _Subscribable.call(this) || this;\n    _this2.isTransitioning = false;\n    _this2.history = (options == null ? void 0 : options.history) || createDefaultHistory();\n    _this2.stringifySearch = (_options$stringifySea = options == null ? void 0 : options.stringifySearch) != null ? _options$stringifySea : defaultStringifySearch;\n    _this2.parseSearch = (_options$parseSearch = options == null ? void 0 : options.parseSearch) != null ? _options$parseSearch : defaultParseSearch;\n    _this2.current = _this2.parseLocation(_this2.history.location);\n    _this2.destroy = _this2.history.listen(function (event) {\n      _this2.current = _this2.parseLocation(event.location, _this2.current);\n\n      _this2.notify();\n    });\n    return _this2;\n  }\n\n  var _proto2 = ReactLocation.prototype;\n\n  _proto2.buildNext = function buildNext(basepath, dest) {\n    var _dest$to, _ref2, _dest$__searchFilters;\n\n    if (basepath === void 0) {\n      basepath = '/';\n    }\n\n    if (dest === void 0) {\n      dest = {};\n    }\n\n    var from = _extends$1({}, this.current, dest.from);\n\n    var pathname = resolvePath(basepath, from.pathname, \"\" + ((_dest$to = dest.to) != null ? _dest$to : '.'));\n    var updatedSearch = (_ref2 = dest.search === true ? from.search : functionalUpdate(dest.search, from.search)) != null ? _ref2 : {};\n    var filteredSearch = (_dest$__searchFilters = dest.__searchFilters) != null && _dest$__searchFilters.length ? dest.__searchFilters.reduce(function (prev, next) {\n      return next(prev, updatedSearch);\n    }, from.search) : updatedSearch;\n    var search = replaceEqualDeep(from.search, filteredSearch);\n    var searchStr = this.stringifySearch(search);\n    var hash = functionalUpdate(dest.hash, from.hash);\n    hash = hash ? \"#\" + hash : '';\n    return {\n      pathname: pathname,\n      search: search,\n      searchStr: searchStr,\n      hash: hash,\n      href: \"\" + pathname + searchStr + hash,\n      key: dest.key\n    };\n  };\n\n  _proto2.navigate = function navigate(next, replace) {\n    var _this3 = this;\n\n    this.current = next;\n    if (this.navigateTimeout) clearTimeout(this.navigateTimeout);\n    var nextAction = 'replace';\n\n    if (!this.nextAction) {\n      nextAction = replace ? 'replace' : 'push';\n    }\n\n    if (!replace) {\n      nextAction = 'push';\n    }\n\n    this.nextAction = nextAction;\n    this.navigateTimeout = setTimeout(function () {\n      var nextAction = _this3.nextAction;\n      delete _this3.nextAction;\n\n      var isSameUrl = _this3.parseLocation(_this3.history.location).href === _this3.current.href;\n\n      if (isSameUrl && !_this3.current.key) {\n        nextAction = 'replace';\n      }\n\n      if (nextAction === 'replace') {\n        return _this3.history.replace({\n          pathname: _this3.current.pathname,\n          hash: _this3.current.hash,\n          search: _this3.current.searchStr\n        });\n      }\n\n      return _this3.history.push({\n        pathname: _this3.current.pathname,\n        hash: _this3.current.hash,\n        search: _this3.current.searchStr\n      });\n    }, 16);\n  };\n\n  _proto2.parseLocation = function parseLocation(location, previousLocation) {\n    var _location$hash$split$;\n\n    var parsedSearch = this.parseSearch(location.search);\n    return {\n      pathname: location.pathname,\n      searchStr: location.search,\n      search: replaceEqualDeep(previousLocation == null ? void 0 : previousLocation.search, parsedSearch),\n      hash: (_location$hash$split$ = location.hash.split('#').reverse()[0]) != null ? _location$hash$split$ : '',\n      href: \"\" + location.pathname + location.search + location.hash,\n      key: location.key\n    };\n  };\n\n  return ReactLocation;\n}(Subscribable);\n\nfunction MatchesProvider(props) {\n  return /*#__PURE__*/React.createElement(MatchesContext.Provider, props);\n}\n\nfunction Router(_ref3) {\n  var children = _ref3.children,\n      location = _ref3.location,\n      rest = _objectWithoutPropertiesLoose(_ref3, _excluded);\n\n  var routerRef = React.useRef(null);\n\n  if (!routerRef.current) {\n    routerRef.current = new RouterInstance({\n      location: location,\n      // snapshot,\n      routes: rest.routes\n    });\n  }\n\n  var router = routerRef.current;\n\n  var _React$useReducer = React.useReducer(function () {\n    return {};\n  }, {}),\n      nonce = _React$useReducer[0],\n      rerender = _React$useReducer[1];\n\n  router.update(rest);\n  useLayoutEffect(function () {\n    return router.subscribe(function () {\n      rerender();\n    });\n  }, []);\n  useLayoutEffect(function () {\n    return router.updateLocation(location.current).unsubscribe;\n  }, [location.current.key]);\n  var routerValue = React.useMemo(function () {\n    return {\n      router: router\n    };\n  }, [nonce]);\n  return /*#__PURE__*/React.createElement(LocationContext.Provider, {\n    value: {\n      location: location\n    }\n  }, /*#__PURE__*/React.createElement(routerContext.Provider, {\n    value: routerValue\n  }, /*#__PURE__*/React.createElement(MatchesProvider, {\n    value: [router.rootMatch].concat(router.state.matches)\n  }, children != null ? children : /*#__PURE__*/React.createElement(Outlet, null))));\n}\n\nvar RouterInstance = /*#__PURE__*/function (_Subscribable2) {\n  _inheritsLoose(RouterInstance, _Subscribable2);\n\n  function RouterInstance(_ref4) {\n    var _this4;\n\n    var location = _ref4.location,\n        rest = _objectWithoutPropertiesLoose(_ref4, _excluded2);\n\n    _this4 = _Subscribable2.call(this) || this;\n    _this4.routesById = {};\n\n    _this4.update = function (_ref5) {\n      var basepath = _ref5.basepath,\n          routes = _ref5.routes,\n          opts = _objectWithoutPropertiesLoose(_ref5, _excluded3);\n\n      Object.assign(_assertThisInitialized(_this4), opts);\n      _this4.basepath = cleanPath(\"/\" + (basepath != null ? basepath : ''));\n      _this4.routesById = {};\n\n      var recurseRoutes = function recurseRoutes(routes, parent) {\n        return routes.map(function (route) {\n          var _route$path, _route$pendingMs, _route$pendingMinMs, _route$children;\n\n          var path = (_route$path = route.path) != null ? _route$path : '*';\n          var id = joinPaths([(parent == null ? void 0 : parent.id) === 'root' ? '' : parent == null ? void 0 : parent.id, \"\" + (path == null ? void 0 : path.replace(/(.)\\/$/, '$1')) + (route.id ? \"-\" + route.id : '')]);\n          route = _extends$1({}, route, {\n            pendingMs: (_route$pendingMs = route.pendingMs) != null ? _route$pendingMs : opts == null ? void 0 : opts.defaultPendingMs,\n            pendingMinMs: (_route$pendingMinMs = route.pendingMinMs) != null ? _route$pendingMinMs : opts == null ? void 0 : opts.defaultPendingMinMs,\n            id: id\n          });\n\n          if (_this4.routesById[id]) {\n            if (process.env.NODE_ENV !== 'production') {\n              console.warn(\"Duplicate routes found with id: \" + id, _this4.routesById, route);\n            }\n\n            throw new Error();\n          }\n\n          _this4.routesById[id] = route;\n          route.children = (_route$children = route.children) != null && _route$children.length ? recurseRoutes(route.children, route) : undefined;\n          return route;\n        });\n      };\n\n      _this4.routes = recurseRoutes(routes);\n      _this4.rootMatch = {\n        id: 'root',\n        params: {},\n        search: {},\n        pathname: _this4.basepath,\n        route: null,\n        ownData: {},\n        data: {},\n        isLoading: false,\n        status: 'resolved'\n      };\n    };\n\n    _this4.setState = function (updater) {\n      var newState = updater({\n        state: _this4.state,\n        pending: _this4.pending\n      });\n      _this4.state = newState.state;\n      _this4.pending = newState.pending;\n\n      _this4.cleanMatchCache();\n\n      _this4.notify();\n    };\n\n    _this4.matchCache = {};\n\n    _this4.cleanMatchCache = function () {\n      var _assertThisInitialize, _assertThisInitialize2, _assertThisInitialize3, _assertThisInitialize4, _assertThisInitialize5;\n\n      var activeMatchIds = [].concat((_assertThisInitialize = (_assertThisInitialize2 = _assertThisInitialized(_this4)) == null ? void 0 : _assertThisInitialize2.state.matches) != null ? _assertThisInitialize : [], (_assertThisInitialize3 = (_assertThisInitialize4 = _assertThisInitialized(_this4)) == null ? void 0 : (_assertThisInitialize5 = _assertThisInitialize4.pending) == null ? void 0 : _assertThisInitialize5.matches) != null ? _assertThisInitialize3 : []).map(function (d) {\n        return d.id;\n      });\n      Object.values(_this4.matchCache).forEach(function (match) {\n        var _match$updatedAt;\n\n        if (!match.updatedAt) {\n          return;\n        }\n\n        if (activeMatchIds.includes(match.id)) {\n          return;\n        }\n\n        var age = Date.now() - ((_match$updatedAt = match.updatedAt) != null ? _match$updatedAt : 0);\n\n        if (!match.maxAge || age > match.maxAge) {\n          if (match.route.unloader) {\n            match.route.unloader(match);\n          }\n\n          delete _this4.matchCache[match.id];\n        }\n      });\n    };\n\n    _this4.updateLocation = function (next) {\n      var unsubscribe;\n      var promise = new Promise(function (resolve) {\n        var matchLoader = new MatchLoader(_assertThisInitialized(_this4), next);\n\n        _this4.setState(function (old) {\n          return _extends$1({}, old, {\n            pending: {\n              location: matchLoader.location,\n              matches: matchLoader.matches\n            }\n          });\n        });\n\n        unsubscribe = matchLoader.subscribe(function () {\n          var currentMatches = _this4.state.matches;\n          currentMatches.filter(function (d) {\n            return !matchLoader.matches.find(function (dd) {\n              return dd.id === d.id;\n            });\n          }).forEach(function (d) {\n            d.onExit == null ? void 0 : d.onExit(d);\n          });\n          currentMatches.filter(function (d) {\n            return matchLoader.matches.find(function (dd) {\n              return dd.id === d.id;\n            });\n          }).forEach(function (d) {\n            d.route.onTransition == null ? void 0 : d.route.onTransition(d);\n          });\n          matchLoader.matches.filter(function (d) {\n            return !currentMatches.find(function (dd) {\n              return dd.id === d.id;\n            });\n          }).forEach(function (d) {\n            d.onExit = d.route.onMatch == null ? void 0 : d.route.onMatch(d);\n          });\n\n          _this4.setState(function (old) {\n            return _extends$1({}, old, {\n              state: {\n                location: matchLoader.location,\n                matches: matchLoader.matches\n              },\n              pending: undefined\n            });\n          });\n\n          resolve();\n        });\n        matchLoader.loadData();\n        matchLoader.startPending();\n      });\n      return {\n        promise: promise,\n        unsubscribe: unsubscribe\n      };\n    };\n\n    _this4.update(rest); // if (snapshot) {\n    //   const matchLoader = new MatchLoader(this, location.current)\n    //   matchLoader.matches.forEach((match, index) => {\n    //     if (match.id !== snapshot.matches[index]?.id) {\n    //       throw new Error(\n    //         `Router hydration mismatch: ${match.id} !== ${snapshot.matches[index]?.id}`,\n    //       )\n    //     }\n    //     match.ownData = snapshot.matches[index]?.ownData ?? {}\n    //   })\n    //   cascadeMatchData(matchLoader.matches)\n    // }\n\n\n    _this4.state = {\n      // location: snapshot?.location ?? location.current,\n      // matches: matchLoader.matches,\n      location: location.current,\n      matches: []\n    };\n    location.subscribe(function () {\n      return _this4.notify();\n    });\n    return _this4;\n  } // snapshot = (): RouterSnapshot<TGenerics> => {\n  //   return {\n  //     location: this.state.location,\n  //     matches: this.state.matches.map(({ ownData, id }) => {\n  //       return {\n  //         id,\n  //         ownData,\n  //       }\n  //     }),\n  //   }\n  // }\n\n\n  return RouterInstance;\n}(Subscribable);\n\nfunction useLocation() {\n  // const getIsMounted = useGetIsMounted()\n  // const [, rerender] = React.useReducer((d) => d + 1, 0)\n  var context = React.useContext(LocationContext);\n  warning(!!context, 'useLocation must be used within a <ReactLocation />'); // useLayoutEffect(() => {\n  //   return instance.subscribe(() => {\n  //     // Rerender all subscribers in a microtask\n  //     Promise.resolve().then(() => {\n  //       // setTimeout(function renderAllLocationSubscribers() {\n  //       if (getIsMounted()) {\n  //         rerender()\n  //       }\n  //       // }, 0)\n  //     })\n  //   })\n  // }, [instance])\n\n  return context.location;\n}\n\nvar RouteMatch = function RouteMatch(unloadedMatch) {\n  var _this5 = this;\n\n  this.status = 'loading';\n  this.ownData = {};\n  this.data = {};\n  this.isLoading = false;\n\n  this.notify = function (isSoft) {\n    var _this5$matchLoader;\n\n    (_this5$matchLoader = _this5.matchLoader) == null ? void 0 : _this5$matchLoader.preNotify(isSoft);\n  };\n\n  this.assignMatchLoader = function (matchLoader) {\n    _this5.matchLoader = matchLoader;\n  };\n\n  this.startPending = function () {\n    if (_this5.pendingTimeout) {\n      clearTimeout(_this5.pendingTimeout);\n    }\n\n    if (_this5.route.pendingMs !== undefined) {\n      _this5.pendingTimeout = setTimeout(function () {\n        if (_this5.status === 'loading') {\n          _this5.status = 'pending';\n        }\n\n        _this5.notify == null ? void 0 : _this5.notify();\n\n        if (typeof _this5.route.pendingMinMs !== 'undefined') {\n          _this5.pendingMinPromise = new Promise(function (r) {\n            return setTimeout(r, _this5.route.pendingMinMs);\n          });\n        }\n      }, _this5.route.pendingMs);\n    }\n  };\n\n  this.load = function (opts) {\n    var _ref6, _opts$maxAge;\n\n    _this5.maxAge = (_ref6 = (_opts$maxAge = opts.maxAge) != null ? _opts$maxAge : _this5.route.loaderMaxAge) != null ? _ref6 : opts.router.defaultLoaderMaxAge;\n\n    if (_this5.loaderPromise) {\n      return;\n    }\n\n    var importer = _this5.route[\"import\"]; // First, run any importers\n\n    _this5.loaderPromise = (!importer ? Promise.resolve() : importer({\n      params: _this5.params,\n      search: _this5.search\n    }).then(function (imported) {\n      _this5.route = _extends$1({}, _this5.route, imported);\n    }) // then run all element and data loaders in parallel\n    ).then(function () {\n      var elementPromises = []; // For each element type, potentially load it asynchronously\n\n      var elementTypes = ['element', 'errorElement', 'pendingElement'];\n      elementTypes.forEach(function (type) {\n        var routeElement = _this5.route[type];\n\n        if (_this5[type]) {\n          return;\n        }\n\n        if (typeof routeElement === 'function') {\n          elementPromises.push(routeElement(_this5).then(function (res) {\n            _this5[type] = res;\n          }));\n        } else {\n          _this5[type] = _this5.route[type];\n        }\n      });\n      var loader = _this5.route.loader;\n      var dataPromise = !loader ? Promise.resolve().then(function () {\n        _this5.status = 'resolved';\n      }) : new Promise(_async(function (resolveLoader) {\n        var pendingTimeout;\n\n        var resolve = function resolve(data) {\n          _this5.status = 'resolved';\n          _this5.ownData = data;\n          _this5.error = undefined;\n        };\n\n        var reject = function reject(err) {\n          console.error(err);\n          _this5.status = 'rejected';\n          _this5.error = err;\n        };\n\n        var finish = function finish() {\n          _this5.isLoading = false;\n          _this5.startPending = undefined;\n          clearTimeout(pendingTimeout);\n          resolveLoader(_this5.ownData);\n          _this5.notify == null ? void 0 : _this5.notify(true);\n        };\n\n        return _continueIgnored(_catch(function () {\n          _this5.isLoading = true;\n          return _await(loader(_this5, {\n            parentMatch: opts.parentMatch,\n            dispatch: _async(function (event) {\n              if (event.type === 'resolve') {\n                resolve(event.data);\n              } else if (event.type === 'reject') {\n                reject(event.error);\n              } else if (event.type === 'loading') {\n                _this5.isLoading = true;\n              } else if (event.type === 'maxAge') {\n                _this5.maxAge = event.maxAge;\n              }\n\n              _this5.updatedAt = Date.now();\n              _this5.notify == null ? void 0 : _this5.notify(true);\n              return _await();\n            })\n          }), function (_loader) {\n            resolve(_loader);\n            return _await(_this5.pendingMinPromise, function () {\n              finish();\n            });\n          });\n        }, function (err) {\n          reject(err);\n          finish();\n        }));\n      }));\n      return Promise.all([].concat(elementPromises, [dataPromise])).then(function () {\n        _this5.updatedAt = Date.now();\n      });\n    }).then(function () {\n      return _this5.ownData;\n    });\n  };\n\n  Object.assign(this, unloadedMatch);\n};\n\nvar MatchLoader = /*#__PURE__*/function (_Subscribable3) {\n  _inheritsLoose(MatchLoader, _Subscribable3);\n\n  function MatchLoader(router, nextLocation) {\n    var _this6;\n\n    _this6 = _Subscribable3.call(this) || this;\n    _this6.status = 'pending';\n\n    _this6.preNotify = function (isSoft) {\n      if (!isSoft) {\n        _this6.status = 'resolved';\n      }\n\n      cascadeMatchData(_this6.matches);\n\n      _this6.notify();\n    };\n\n    _this6.loadData = _async(function (_temp) {\n      var _this6$matches;\n\n      var _ref7 = _temp === void 0 ? {} : _temp,\n          maxAge = _ref7.maxAge;\n\n      _this6.router.cleanMatchCache();\n\n      if (!((_this6$matches = _this6.matches) != null && _this6$matches.length)) {\n        _this6.preNotify();\n\n        return;\n      }\n\n      _this6.firstRenderPromises = [];\n\n      _this6.matches.forEach(function (match, index) {\n        var _this6$matches2, _this6$firstRenderPro;\n\n        var parentMatch = (_this6$matches2 = _this6.matches) == null ? void 0 : _this6$matches2[index - 1];\n        match.assignMatchLoader == null ? void 0 : match.assignMatchLoader(_assertThisInitialized(_this6));\n        match.load == null ? void 0 : match.load({\n          maxAge: maxAge,\n          parentMatch: parentMatch,\n          router: _this6.router\n        });\n        (_this6$firstRenderPro = _this6.firstRenderPromises) == null ? void 0 : _this6$firstRenderPro.push(match.loaderPromise);\n      });\n\n      return Promise.all(_this6.firstRenderPromises).then(function () {\n        _this6.preNotify();\n\n        return _this6.matches;\n      });\n    });\n    _this6.load = _async(function (_temp2) {\n      var _ref8 = _temp2 === void 0 ? {} : _temp2,\n          maxAge = _ref8.maxAge;\n\n      return _this6.loadData({\n        maxAge: maxAge\n      });\n    });\n    _this6.startPending = _async(function () {\n      _this6.matches.forEach(function (match) {\n        return match.startPending == null ? void 0 : match.startPending();\n      });\n\n      return _await();\n    });\n    _this6.router = router;\n    _this6.location = nextLocation;\n    _this6.matches = [];\n    var unloadedMatches = matchRoutes(_this6.router, _this6.location);\n    _this6.matches = unloadedMatches == null ? void 0 : unloadedMatches.map(function (unloadedMatch) {\n      if (!_this6.router.matchCache[unloadedMatch.id]) {\n        _this6.router.matchCache[unloadedMatch.id] = new RouteMatch(unloadedMatch);\n      }\n\n      return _this6.router.matchCache[unloadedMatch.id];\n    });\n    return _this6;\n  }\n\n  return MatchLoader;\n}(Subscribable);\n\nfunction cascadeMatchData(matches) {\n  matches == null ? void 0 : matches.forEach(function (match, index) {\n    var _parentMatch$data;\n\n    var parentMatch = matches == null ? void 0 : matches[index - 1];\n    match.data = _extends$1({}, (_parentMatch$data = parentMatch == null ? void 0 : parentMatch.data) != null ? _parentMatch$data : {}, match.ownData);\n  });\n}\n\nfunction useRouter() {\n  var value = React.useContext(routerContext);\n\n  if (!value) {\n    warning(true, 'You are trying to use useRouter() outside of ReactLocation!');\n    throw new Error();\n  }\n\n  return value.router;\n}\n\nfunction matchRoutes(router, currentLocation) {\n  if (!router.routes.length) {\n    return [];\n  }\n\n  var matches = [];\n\n  var recurse = _async(function (routes, parentMatch) {\n    var _route$children3;\n\n    var pathname = parentMatch.pathname,\n        params = parentMatch.params;\n    var filteredRoutes = router != null && router.filterRoutes ? router == null ? void 0 : router.filterRoutes(routes) : routes;\n    var route = filteredRoutes.find(function (route) {\n      var _route$children2, _route$caseSensitive;\n\n      var fullRoutePathName = joinPaths([pathname, route.path]);\n      var fuzzy = !!(route.path !== '/' || (_route$children2 = route.children) != null && _route$children2.length);\n      var matchParams = matchRoute(currentLocation, {\n        to: fullRoutePathName,\n        search: route.search,\n        fuzzy: fuzzy,\n        caseSensitive: (_route$caseSensitive = route.caseSensitive) != null ? _route$caseSensitive : router.caseSensitive\n      });\n\n      if (matchParams) {\n        params = _extends$1({}, params, matchParams);\n      }\n\n      return !!matchParams;\n    });\n\n    if (!route) {\n      return;\n    }\n\n    var interpolatedPath = interpolatePath(route.path, params);\n    pathname = joinPaths([pathname, interpolatedPath]);\n    var interpolatedId = interpolatePath(route.id, params, true);\n    var match = {\n      id: interpolatedId,\n      route: route,\n      params: params,\n      pathname: pathname,\n      search: currentLocation.search\n    };\n    matches.push(match);\n\n    if ((_route$children3 = route.children) != null && _route$children3.length) {\n      recurse(route.children, match);\n    }\n\n    return _await();\n  });\n\n  recurse(router.routes, router.rootMatch);\n  return matches;\n}\n\nfunction interpolatePath(path, params, leaveWildcard) {\n  var interpolatedPathSegments = parsePathname(path);\n  return joinPaths(interpolatedPathSegments.map(function (segment) {\n    if (segment.value === '*' && !leaveWildcard) {\n      return '';\n    }\n\n    if (segment.type === 'param') {\n      var _segment$value$substr;\n\n      return (_segment$value$substr = params[segment.value.substring(1)]) != null ? _segment$value$substr : '';\n    }\n\n    return segment.value;\n  }));\n}\n\nfunction useLoadRoute() {\n  var location = useLocation();\n  var match = useMatch();\n  var router = useRouter();\n  var buildNext = useBuildNext();\n  return useLatestCallback(_async(function (navigate, opts) {\n    var _navigate$from;\n\n    if (navigate === undefined) navigate = location.current;\n    var next = buildNext(_extends$1({}, navigate, {\n      from: (_navigate$from = navigate.from) != null ? _navigate$from : {\n        pathname: match.pathname\n      }\n    }));\n    var matchLoader = new MatchLoader(router, next);\n    return matchLoader.load(opts);\n  }));\n}\n\nfunction useParentMatches() {\n  var router = useRouter();\n  var match = useMatch();\n  var matches = router.state.matches;\n  return matches.slice(0, matches.findIndex(function (d) {\n    return d.id === match.id;\n  }) - 1);\n}\n\nfunction useMatches() {\n  return React.useContext(MatchesContext);\n}\n\nfunction useMatch() {\n  var _useMatches;\n\n  return (_useMatches = useMatches()) == null ? void 0 : _useMatches[0];\n}\n\nfunction useNavigate() {\n  var location = useLocation();\n  var match = useMatch();\n  var buildNext = useBuildNext();\n\n  function navigate(_ref9) {\n    var _fromCurrent;\n\n    var search = _ref9.search,\n        hash = _ref9.hash,\n        replace = _ref9.replace,\n        from = _ref9.from,\n        to = _ref9.to,\n        fromCurrent = _ref9.fromCurrent;\n    fromCurrent = (_fromCurrent = fromCurrent) != null ? _fromCurrent : typeof to === 'undefined';\n    var next = buildNext({\n      to: to,\n      search: search,\n      hash: hash,\n      from: fromCurrent ? location.current : from != null ? from : {\n        pathname: match.pathname\n      }\n    });\n    location.navigate(next, replace);\n  }\n\n  return useLatestCallback(navigate);\n}\n\nfunction Navigate(options) {\n  var navigate = useNavigate();\n  useLayoutEffect(function () {\n    navigate(options);\n  }, [navigate]);\n  return null;\n}\n\nfunction useBuildNext() {\n  var location = useLocation();\n  var router = useRouter();\n\n  var buildNext = function buildNext(opts) {\n    var next = location.buildNext(router.basepath, opts);\n    var matches = matchRoutes(router, next);\n\n    var __searchFilters = matches.map(function (match) {\n      var _match$route$searchFi;\n\n      return (_match$route$searchFi = match.route.searchFilters) != null ? _match$route$searchFi : [];\n    }).flat().filter(Boolean);\n\n    return location.buildNext(router.basepath, _extends$1({}, opts, {\n      __searchFilters: __searchFilters\n    }));\n  };\n\n  return useLatestCallback(buildNext);\n}\n\nvar Link = function Link(_ref10) {\n  var _preload;\n\n  var _ref10$to = _ref10.to,\n      to = _ref10$to === void 0 ? '.' : _ref10$to,\n      search = _ref10.search,\n      hash = _ref10.hash,\n      children = _ref10.children,\n      target = _ref10.target,\n      _ref10$style = _ref10.style,\n      style = _ref10$style === void 0 ? {} : _ref10$style,\n      replace = _ref10.replace,\n      onClick = _ref10.onClick,\n      onMouseEnter = _ref10.onMouseEnter,\n      _ref10$className = _ref10.className,\n      className = _ref10$className === void 0 ? '' : _ref10$className,\n      _ref10$getActiveProps = _ref10.getActiveProps,\n      getActiveProps = _ref10$getActiveProps === void 0 ? function () {\n    return {};\n  } : _ref10$getActiveProps,\n      _ref10$getInactivePro = _ref10.getInactiveProps,\n      getInactiveProps = _ref10$getInactivePro === void 0 ? function () {\n    return {};\n  } : _ref10$getInactivePro,\n      activeOptions = _ref10.activeOptions,\n      preload = _ref10.preload,\n      disabled = _ref10.disabled,\n      _ref = _ref10._ref,\n      rest = _objectWithoutPropertiesLoose(_ref10, _excluded4);\n\n  var loadRoute = useLoadRoute();\n  var match = useMatch();\n  var location = useLocation();\n  var router = useRouter();\n  var navigate = useNavigate();\n  var buildNext = useBuildNext();\n  preload = (_preload = preload) != null ? _preload : router.defaultLinkPreloadMaxAge; // If this `to` is a valid external URL, log a warning\n\n  try {\n    var url = new URL(\"\" + to);\n    warning(false, \"<Link /> should not be used for external URLs like: \" + url.href);\n  } catch (e) {}\n\n  var next = buildNext({\n    to: to,\n    search: search,\n    hash: hash,\n    from: {\n      pathname: match.pathname\n    }\n  }); // The click handler\n\n  var handleClick = function handleClick(e) {\n    if (onClick) onClick(e);\n\n    if (!isCtrlEvent(e) && !e.defaultPrevented && (!target || target === '_self') && e.button === 0) {\n      e.preventDefault(); // All is well? Navigate!\n\n      navigate({\n        to: to,\n        search: search,\n        hash: hash,\n        replace: replace,\n        from: {\n          pathname: match.pathname\n        }\n      });\n    }\n  }; // The click handler\n\n\n  var handleMouseEnter = function handleMouseEnter(e) {\n    if (onMouseEnter) onMouseEnter(e);\n\n    if (preload && preload > 0) {\n      loadRoute({\n        to: to,\n        search: search,\n        hash: hash\n      }, {\n        maxAge: preload\n      });\n    }\n  }; // Compare path/hash for matches\n\n\n  var pathIsEqual = location.current.pathname === next.pathname;\n  var currentPathSplit = location.current.pathname.split('/');\n  var nextPathSplit = next.pathname.split('/');\n  var pathIsFuzzyEqual = nextPathSplit.every(function (d, i) {\n    return d === currentPathSplit[i];\n  });\n  var hashIsEqual = location.current.hash === next.hash; // Combine the matches based on user options\n\n  var pathTest = activeOptions != null && activeOptions.exact ? pathIsEqual : pathIsFuzzyEqual;\n  var hashTest = activeOptions != null && activeOptions.includeHash ? hashIsEqual : true; // The final \"active\" test\n\n  var isActive = pathTest && hashTest; // Get the active props\n\n  var _ref11 = isActive ? getActiveProps() : {},\n      _ref11$style = _ref11.style,\n      activeStyle = _ref11$style === void 0 ? {} : _ref11$style,\n      _ref11$className = _ref11.className,\n      activeClassName = _ref11$className === void 0 ? '' : _ref11$className,\n      activeRest = _objectWithoutPropertiesLoose(_ref11, _excluded5); // Get the inactive props\n\n\n  var _ref12 = isActive ? {} : getInactiveProps(),\n      _ref12$style = _ref12.style,\n      inactiveStyle = _ref12$style === void 0 ? {} : _ref12$style,\n      _ref12$className = _ref12.className,\n      inactiveClassName = _ref12$className === void 0 ? '' : _ref12$className,\n      inactiveRest = _objectWithoutPropertiesLoose(_ref12, _excluded6);\n\n  return /*#__PURE__*/React.createElement(\"a\", _extends$1({\n    ref: _ref,\n    href: disabled ? undefined : next.href,\n    onClick: handleClick,\n    onMouseEnter: handleMouseEnter,\n    target: target,\n    style: _extends$1({}, style, activeStyle, inactiveStyle),\n    className: [className, activeClassName, inactiveClassName].filter(Boolean).join(' ') || undefined\n  }, disabled ? {\n    role: 'link',\n    'aria-disabled': true\n  } : undefined, rest, activeRest, inactiveRest, {\n    children: typeof children === 'function' ? children({\n      isActive: isActive\n    }) : children\n  }));\n};\n\nfunction Outlet() {\n  var _match$errorElement;\n\n  var router = useRouter();\n\n  var _useMatches2 = useMatches();\n\n  _useMatches2[0];\n\n  var matches = _useMatches2.slice(1);\n\n  var match = matches[0];\n\n  if (!match) {\n    return null;\n  }\n\n  var errorElement = (_match$errorElement = match.errorElement) != null ? _match$errorElement : router.defaultErrorElement;\n\n  var element = function () {\n    var _match$pendingElement, _match$element;\n\n    if (match.status === 'rejected') {\n      if (errorElement) {\n        return errorElement;\n      }\n\n      if (!router.useErrorBoundary) {\n        if (process.env.NODE_ENV !== 'production') {\n          var preStyle = {\n            whiteSpace: 'normal',\n            display: 'inline-block',\n            background: 'rgba(0,0,0,.1)',\n            padding: '.1rem .2rem',\n            margin: '.1rem',\n            lineHeight: '1',\n            borderRadius: '.25rem'\n          };\n          return /*#__PURE__*/React.createElement(\"div\", {\n            style: {\n              lineHeight: '1.7'\n            }\n          }, /*#__PURE__*/React.createElement(\"strong\", null, \"The following error occured in the loader for you route at:\", ' ', /*#__PURE__*/React.createElement(\"pre\", {\n            style: preStyle\n          }, match.pathname)), \".\", /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"pre\", {\n            style: _extends$1({}, preStyle, {\n              display: 'block',\n              padding: '.5rem',\n              borderRadius: '.5rem'\n            })\n          }, match.error.toString()), /*#__PURE__*/React.createElement(\"br\", null), \"Your users won't see this message in production, but they will see\", ' ', /*#__PURE__*/React.createElement(\"strong\", null, \"\\\"An unknown error occured!\\\"\"), \", which is at least better than breaking your entire app. \\uD83D\\uDE0A For a better UX, please specify an \", /*#__PURE__*/React.createElement(\"pre\", {\n            style: preStyle\n          }, \"errorElement\"), \" for all of your routes that contain asynchronous behavior, or at least provide your own\", /*#__PURE__*/React.createElement(\"pre\", {\n            style: preStyle\n          }, \"ErrorBoundary\"), \" wrapper around your renders to both the elements rendered by\", ' ', /*#__PURE__*/React.createElement(\"pre\", {\n            style: preStyle\n          }, 'useRoutes(routes, { useErrorBoundary: true })'), ' ', \"and \", /*#__PURE__*/React.createElement(\"pre\", {\n            style: preStyle\n          }, '<Router useErrorBoundary />'), \".\", ' ', /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"br\", null));\n        }\n\n        return 'An unknown error occured!';\n      }\n\n      throw match.error;\n    }\n\n    var pendingElement = (_match$pendingElement = match.pendingElement) != null ? _match$pendingElement : router.defaultPendingElement;\n\n    if (match.status === 'loading') {\n      return null;\n    }\n\n    if (match.status === 'pending') {\n      if (match.route.pendingMs || pendingElement) {\n        return pendingElement != null ? pendingElement : null;\n      }\n    }\n\n    var matchElement = (_match$element = match.element) != null ? _match$element : router.defaultElement;\n    return matchElement != null ? matchElement : /*#__PURE__*/React.createElement(Outlet, null);\n  }();\n\n  return /*#__PURE__*/React.createElement(MatchesProvider, {\n    value: matches\n  }, element);\n}\n\nfunction useResolvePath() {\n  var router = useRouter();\n  var match = useMatch();\n  return useLatestCallback(function (path) {\n    return resolvePath(router.basepath, match.pathname, cleanPath(path));\n  });\n}\n\nfunction useSearch() {\n  var location = useLocation();\n  return location.current.search;\n}\n\nfunction matchRoute(currentLocation, matchLocation) {\n  var pathParams = matchByPath(currentLocation, matchLocation);\n  var searchMatched = matchBySearch(currentLocation, matchLocation);\n\n  if (matchLocation.to && !pathParams) {\n    return;\n  }\n\n  if (matchLocation.search && !searchMatched) {\n    return;\n  }\n\n  return pathParams != null ? pathParams : {};\n}\n\nfunction useMatchRoute() {\n  var router = useRouter();\n  var resolvePath = useResolvePath();\n  return useLatestCallback(function (_ref13) {\n    var pending = _ref13.pending,\n        matchLocation = _objectWithoutPropertiesLoose(_ref13, _excluded7);\n\n    matchLocation = _extends$1({}, matchLocation, {\n      to: matchLocation.to ? resolvePath(\"\" + matchLocation.to) : undefined\n    });\n\n    if (pending) {\n      var _router$pending;\n\n      if (!((_router$pending = router.pending) != null && _router$pending.location)) {\n        return undefined;\n      }\n\n      return matchRoute(router.pending.location, matchLocation);\n    }\n\n    return matchRoute(router.state.location, matchLocation);\n  });\n}\n\nfunction MatchRoute(_ref14) {\n  var children = _ref14.children,\n      rest = _objectWithoutPropertiesLoose(_ref14, _excluded8);\n\n  var matchRoute = useMatchRoute();\n  var match = matchRoute(rest);\n\n  if (typeof children === 'function') {\n    return children(match);\n  }\n\n  return match ? children : null;\n}\n\nfunction usePrompt(message, when) {\n  var location = useLocation();\n  React.useEffect(function () {\n    if (!when) return;\n    var unblock = location.history.block(function (transition) {\n      if (window.confirm(message)) {\n        unblock();\n        transition.retry();\n      } else {\n        location.current.pathname = window.location.pathname;\n      }\n    });\n    return unblock;\n  }, [when, location, message]);\n}\n\nfunction Prompt(_ref15) {\n  var message = _ref15.message,\n      when = _ref15.when,\n      children = _ref15.children;\n  usePrompt(message, when != null ? when : true);\n  return children != null ? children : null;\n}\n\nfunction warning(cond, message) {\n  if (!cond) {\n    if (typeof console !== 'undefined') console.warn(message);\n\n    try {\n      throw new Error(message);\n    } catch (_unused) {}\n  }\n}\n\nfunction isFunction(d) {\n  return typeof d === 'function';\n}\n\nfunction functionalUpdate(updater, previous) {\n  if (isFunction(updater)) {\n    return updater(previous);\n  }\n\n  return updater;\n}\n\nfunction joinPaths(paths) {\n  return cleanPath(paths.filter(Boolean).join('/'));\n}\n\nfunction cleanPath(path) {\n  // remove double slashes\n  return (\"\" + path).replace(/\\/{2,}/g, '/');\n}\n\nfunction matchByPath(currentLocation, matchLocation) {\n  var _matchLocation$to;\n\n  var baseSegments = parsePathname(currentLocation.pathname);\n  var routeSegments = parsePathname(\"\" + ((_matchLocation$to = matchLocation.to) != null ? _matchLocation$to : '*'));\n  var params = {};\n\n  var isMatch = function () {\n    for (var i = 0; i < Math.max(baseSegments.length, routeSegments.length); i++) {\n      var baseSegment = baseSegments[i];\n      var routeSegment = routeSegments[i];\n      var isLastRouteSegment = i === routeSegments.length - 1;\n      var isLastBaseSegment = i === baseSegments.length - 1;\n\n      if (routeSegment) {\n        if (routeSegment.type === 'wildcard') {\n          if (baseSegment != null && baseSegment.value) {\n            params['*'] = joinPaths(baseSegments.slice(i).map(function (d) {\n              return d.value;\n            }));\n            return true;\n          }\n\n          return false;\n        }\n\n        if (routeSegment.type === 'pathname') {\n          if (routeSegment.value === '/' && !(baseSegment != null && baseSegment.value)) {\n            return true;\n          }\n\n          if (baseSegment) {\n            if (matchLocation.caseSensitive) {\n              if (routeSegment.value !== baseSegment.value) {\n                return false;\n              }\n            } else if (routeSegment.value.toLowerCase() !== baseSegment.value.toLowerCase()) {\n              return false;\n            }\n          }\n        }\n\n        if (!baseSegment) {\n          return false;\n        }\n\n        if (routeSegment.type === 'param') {\n          params[routeSegment.value.substring(1)] = baseSegment.value;\n        }\n      }\n\n      if (isLastRouteSegment && !isLastBaseSegment) {\n        return !!matchLocation.fuzzy;\n      }\n    }\n\n    return true;\n  }();\n\n  return isMatch ? params : undefined;\n}\n\nfunction matchBySearch(currentLocation, matchLocation) {\n  return !!(matchLocation.search && matchLocation.search(currentLocation.search));\n}\n\nfunction parsePathname(pathname) {\n  if (!pathname) {\n    return [];\n  }\n\n  pathname = cleanPath(pathname);\n  var segments = [];\n\n  if (pathname.slice(0, 1) === '/') {\n    pathname = pathname.substring(1);\n    segments.push({\n      type: 'pathname',\n      value: '/'\n    });\n  }\n\n  if (!pathname) {\n    return segments;\n  } // Remove empty segments and '.' segments\n\n\n  var split = pathname.split('/').filter(Boolean);\n  segments.push.apply(segments, split.map(function (part) {\n    if (part.startsWith('*')) {\n      return {\n        type: 'wildcard',\n        value: part\n      };\n    }\n\n    if (part.charAt(0) === ':') {\n      return {\n        type: 'param',\n        value: part\n      };\n    }\n\n    return {\n      type: 'pathname',\n      value: part\n    };\n  }));\n\n  if (pathname.slice(-1) === '/') {\n    pathname = pathname.substring(1);\n    segments.push({\n      type: 'pathname',\n      value: '/'\n    });\n  }\n\n  return segments;\n}\n\nfunction resolvePath(basepath, base, to) {\n  base = base.replace(new RegExp(\"^\" + basepath), '/');\n  to = to.replace(new RegExp(\"^\" + basepath), '/');\n  var baseSegments = parsePathname(base);\n  var toSegments = parsePathname(to);\n  toSegments.forEach(function (toSegment, index) {\n    if (toSegment.value === '/') {\n      if (!index) {\n        // Leading slash\n        baseSegments = [toSegment];\n      } else if (index === toSegments.length - 1) {\n        // Trailing Slash\n        baseSegments.push(toSegment);\n      } else ;\n    } else if (toSegment.value === '..') {\n      baseSegments.pop();\n    } else if (toSegment.value === '.') {\n      return;\n    } else {\n      baseSegments.push(toSegment);\n    }\n  });\n  var joined = joinPaths([basepath].concat(baseSegments.map(function (d) {\n    return d.value;\n  })));\n  return cleanPath(joined);\n}\n\nfunction isCtrlEvent(e) {\n  return !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey);\n}\n\nfunction useLatestCallback(cb) {\n  var stableFnRef = React.useRef();\n  var cbRef = React.useRef(cb);\n  cbRef.current = cb;\n\n  if (!stableFnRef.current) {\n    stableFnRef.current = function () {\n      return cbRef.current.apply(cbRef, arguments);\n    };\n  }\n\n  return stableFnRef.current;\n}\n/**\n * This function returns `a` if `b` is deeply equal.\n * If not, it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\n\n\nfunction replaceEqualDeep(prev, next) {\n  if (prev === next) {\n    return prev;\n  }\n\n  var array = Array.isArray(prev) && Array.isArray(next);\n\n  if (array || isPlainObject(prev) && isPlainObject(next)) {\n    var aSize = array ? prev.length : Object.keys(prev).length;\n    var bItems = array ? next : Object.keys(next);\n    var bSize = bItems.length;\n    var copy = array ? [] : {};\n    var equalItems = 0;\n\n    for (var i = 0; i < bSize; i++) {\n      var key = array ? i : bItems[i];\n      copy[key] = replaceEqualDeep(prev[key], next[key]);\n\n      if (copy[key] === prev[key]) {\n        equalItems++;\n      }\n    }\n\n    return aSize === bSize && equalItems === aSize ? prev : copy;\n  }\n\n  return next;\n} // Copied from: https://github.com/jonschlinkert/is-plain-object\n\n\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  } // If has modified constructor\n\n\n  var ctor = o.constructor;\n\n  if (typeof ctor === 'undefined') {\n    return true;\n  } // If has modified prototype\n\n\n  var prot = ctor.prototype;\n\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  } // If constructor does not have an Object-specific method\n\n\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false;\n  } // Most likely a plain Object\n\n\n  return true;\n}\n\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction defaultStringifySearch(search) {\n  search = _extends$1({}, search);\n\n  if (search) {\n    Object.keys(search).forEach(function (key) {\n      var val = search[key];\n\n      if (typeof val === 'undefined' || val === undefined) {\n        delete search[key];\n      } else if (val && typeof val === 'object' && val !== null) {\n        try {\n          search[key] = JSON.stringify(val);\n        } catch (err) {// silent\n        }\n      }\n    });\n  }\n\n  var searchStr = new URLSearchParams(search).toString();\n  return searchStr ? \"?\" + searchStr : '';\n}\n\nfunction defaultParseSearch(searchStr) {\n  if (searchStr.substring(0, 1) === '?') {\n    searchStr = searchStr.substring(1);\n  }\n\n  var query = Object.fromEntries(new URLSearchParams(searchStr).entries()); // Try to parse query params\n\n  for (var key in query) {\n    var value = query[key];\n\n    try {\n      query[key] = JSON.parse(value);\n    } catch (err) {//\n    }\n  }\n\n  return query;\n}\n\nexport { Link, MatchRoute, MatchesProvider, Navigate, Outlet, Prompt, ReactLocation, RouteMatch, Router, RouterInstance, cleanPath, createBrowserHistory, createHashHistory, createMemoryHistory, defaultParseSearch, defaultStringifySearch, functionalUpdate, matchByPath, matchRoute, matchRoutes, parsePathname, resolvePath, useLoadRoute, useLocation, useMatch, useMatchRoute, useMatches, useNavigate, useParentMatches, usePrompt, useResolvePath, useRouter, useSearch };","map":{"version":3,"mappings":"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","names":["_assertThisInitialized","self","ReferenceError","_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_extends","assign","arguments","prototype","hasOwnProperty","call","apply","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","r","B","Pop","Push","Replace","C","process","env","NODE_ENV","b","freeze","D","h","console","warn","Error","k","E","preventDefault","returnValue","F","push","filter","forEach","H","Math","random","toString","substr","I","pathname","search","hash","J","createBrowserHistory","c","location","a","m","state","idx","usr","x","q","z","t","v","d","action","A","e","l","g","f","retry","n","pushState","G","y","replaceState","w","go","window","document","defaultView","history","u","addEventListener","createHref","replace","back","forward","listen","block","removeEventListener","createHashHistory","querySelector","getAttribute","href","slice","charAt","JSON","stringify","K","createMemoryHistory","splice","min","max","initialEntries","initialIndex","map","index","_await","value","then","direct","Promise","resolve","body","recover","result","args","reject","LocationContext","React","createContext","MatchesContext","routerContext","isDOM","Boolean","createElement","useLayoutEffect","useEffect","createDefaultHistory","Subscribable","listeners","subscribe","listener","_this","notify","ReactLocation","options","_this2","isTransitioning","stringifySearch","defaultStringifySearch","parseSearch","defaultParseSearch","current","parseLocation","destroy","event","_proto2","buildNext","basepath","dest","from","resolvePath","to","updatedSearch","functionalUpdate","filteredSearch","__searchFilters","reduce","prev","next","replaceEqualDeep","searchStr","navigate","navigateTimeout","clearTimeout","nextAction","setTimeout","_this3","isSameUrl","previousLocation","parsedSearch","split","reverse","MatchesProvider","props","Provider","Router","children","rest","routerRef","useRef","RouterInstance","routes","router","useReducer","nonce","rerender","update","updateLocation","unsubscribe","routerValue","useMemo","rootMatch","matches","Outlet","_this4","routesById","opts","cleanPath","recurseRoutes","parent","route","path","id","joinPaths","pendingMs","defaultPendingMs","pendingMinMs","defaultPendingMinMs","undefined","params","ownData","data","isLoading","status","setState","updater","newState","pending","cleanMatchCache","matchCache","activeMatchIds","_assertThisInitialize2","_assertThisInitialize4","_assertThisInitialize5","values","match","updatedAt","includes","age","Date","now","maxAge","unloader","promise","matchLoader","MatchLoader","old","currentMatches","find","dd","onExit","onTransition","onMatch","loadData","startPending","useLocation","context","useContext","warning","RouteMatch","unloadedMatch","isSoft","preNotify","assignMatchLoader","_this5","pendingTimeout","pendingMinPromise","load","loaderMaxAge","defaultLoaderMaxAge","loaderPromise","importer","imported","elementPromises","elementTypes","type","routeElement","res","loader","dataPromise","resolveLoader","error","err","finish","parentMatch","dispatch","all","nextLocation","_this6","cascadeMatchData","_this6$matches","firstRenderPromises","_this6$matches2","unloadedMatches","matchRoutes","useRouter","currentLocation","recurse","filteredRoutes","filterRoutes","fullRoutePathName","fuzzy","_route$children2","matchParams","matchRoute","caseSensitive","interpolatedPath","interpolatePath","interpolatedId","_route$children3","leaveWildcard","interpolatedPathSegments","parsePathname","segment","substring","useLoadRoute","useMatch","useBuildNext","useLatestCallback","useParentMatches","findIndex","useMatches","_useMatches","useNavigate","fromCurrent","Navigate","searchFilters","flat","Link","style","onClick","onMouseEnter","className","getActiveProps","getInactiveProps","activeOptions","preload","disabled","_ref","loadRoute","defaultLinkPreloadMaxAge","url","URL","handleClick","isCtrlEvent","defaultPrevented","button","handleMouseEnter","pathIsEqual","currentPathSplit","nextPathSplit","pathIsFuzzyEqual","every","hashIsEqual","pathTest","exact","hashTest","includeHash","isActive","activeStyle","activeClassName","activeRest","inactiveStyle","inactiveClassName","inactiveRest","ref","join","role","_useMatches2","errorElement","defaultErrorElement","element","useErrorBoundary","preStyle","whiteSpace","display","background","padding","margin","lineHeight","borderRadius","pendingElement","defaultPendingElement","matchElement","defaultElement","useResolvePath","useSearch","matchLocation","pathParams","matchByPath","searchMatched","matchBySearch","useMatchRoute","_router$pending","MatchRoute","usePrompt","message","when","unblock","transition","confirm","Prompt","cond","isFunction","previous","paths","baseSegments","routeSegments","isMatch","baseSegment","routeSegment","isLastRouteSegment","isLastBaseSegment","toLowerCase","segments","part","startsWith","base","RegExp","toSegments","toSegment","pop","joined","metaKey","altKey","ctrlKey","shiftKey","cb","stableFnRef","cbRef","array","Array","isArray","isPlainObject","aSize","bItems","bSize","copy","equalItems","hasObjectPrototype","ctor","prot","val","URLSearchParams","query","fromEntries","entries","parse"],"sources":["../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../../node_modules/@babel/runtime/helpers/esm/extends.js","../../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../../node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../../../../node_modules/history/node_modules/@babel/runtime/helpers/esm/extends.js","../../../../node_modules/history/index.js","../../src/index.tsx"],"sourcesContent":["export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import _extends from'@babel/runtime/helpers/esm/extends';var r,B=r||(r={});B.Pop=\"POP\";B.Push=\"PUSH\";B.Replace=\"REPLACE\";var C=\"production\"!==process.env.NODE_ENV?function(b){return Object.freeze(b)}:function(b){return b};function D(b,h){if(!b){\"undefined\"!==typeof console&&console.warn(h);try{throw Error(h);}catch(k){}}}function E(b){b.preventDefault();b.returnValue=\"\"}\nfunction F(){var b=[];return{get length(){return b.length},push:function(h){b.push(h);return function(){b=b.filter(function(k){return k!==h})}},call:function(h){b.forEach(function(k){return k&&k(h)})}}}function H(){return Math.random().toString(36).substr(2,8)}function I(b){var h=b.pathname,k=b.search;b=b.hash;return(void 0===h?\"/\":h)+(void 0===k?\"\":k)+(void 0===b?\"\":b)}\nfunction J(b){var h={};if(b){var k=b.indexOf(\"#\");0<=k&&(h.hash=b.substr(k),b=b.substr(0,k));k=b.indexOf(\"?\");0<=k&&(h.search=b.substr(k),b=b.substr(0,k));b&&(h.pathname=b)}return h}\nfunction createBrowserHistory(b){function h(){var c=p.location,a=m.state||{};return[a.idx,C({pathname:c.pathname,search:c.search,hash:c.hash,state:a.usr||null,key:a.key||\"default\"})]}function k(c){return\"string\"===typeof c?c:I(c)}function x(c,a){void 0===a&&(a=null);return C(_extends({},q,\"string\"===typeof c?J(c):c,{state:a,key:H()}))}function z(c){t=c;c=h();v=c[0];q=c[1];d.call({action:t,location:q})}function A(c,a){function e(){A(c,a)}var l=r.Push,g=x(c,a);if(!f.length||(f.call({action:l,\nlocation:g,retry:e}),!1)){var n=[{usr:g.state,key:g.key,idx:v+1},k(g)];g=n[0];n=n[1];try{m.pushState(g,\"\",n)}catch(G){p.location.assign(n)}z(l)}}function y(c,a){function e(){y(c,a)}var l=r.Replace,g=x(c,a);f.length&&(f.call({action:l,location:g,retry:e}),1)||(g=[{usr:g.state,key:g.key,idx:v},k(g)],m.replaceState(g[0],\"\",g[1]),z(l))}function w(c){m.go(c)}void 0===b&&(b={});b=b.window;var p=void 0===b?document.defaultView:b,m=p.history,u=null;p.addEventListener(\"popstate\",function(){if(u)f.call(u),\nu=null;else{var c=r.Pop,a=h(),e=a[0];a=a[1];if(f.length)if(null!=e){var l=v-e;l&&(u={action:c,location:a,retry:function(){w(-1*l)}},w(l))}else\"production\"!==process.env.NODE_ENV?D(!1,\"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.\"):void 0;else z(c)}});var t=\nr.Pop;b=h();var v=b[0],q=b[1],d=F(),f=F();null==v&&(v=0,m.replaceState(_extends({},m.state,{idx:v}),\"\"));return{get action(){return t},get location(){return q},createHref:k,push:A,replace:y,go:w,back:function(){w(-1)},forward:function(){w(1)},listen:function(c){return d.push(c)},block:function(c){var a=f.push(c);1===f.length&&p.addEventListener(\"beforeunload\",E);return function(){a();f.length||p.removeEventListener(\"beforeunload\",E)}}}};\nfunction createHashHistory(b){function h(){var a=J(m.location.hash.substr(1)),e=a.pathname,l=a.search;a=a.hash;var g=u.state||{};return[g.idx,C({pathname:void 0===e?\"/\":e,search:void 0===l?\"\":l,hash:void 0===a?\"\":a,state:g.usr||null,key:g.key||\"default\"})]}function k(){if(t)c.call(t),t=null;else{var a=r.Pop,e=h(),l=e[0];e=e[1];if(c.length)if(null!=l){var g=q-l;g&&(t={action:a,location:e,retry:function(){p(-1*g)}},p(g))}else\"production\"!==process.env.NODE_ENV?D(!1,\"You are trying to block a POP navigation to a location that was not created by the history library. The block will fail silently in production, but in general you should do all navigation with the history library (instead of using window.history.pushState directly) to avoid this situation.\"):\nvoid 0;else A(a)}}function x(a){var e=document.querySelector(\"base\"),l=\"\";e&&e.getAttribute(\"href\")&&(e=m.location.href,l=e.indexOf(\"#\"),l=-1===l?e:e.slice(0,l));return l+\"#\"+(\"string\"===typeof a?a:I(a))}function z(a,e){void 0===e&&(e=null);return C(_extends({},d,\"string\"===typeof a?J(a):a,{state:e,key:H()}))}function A(a){v=a;a=h();q=a[0];d=a[1];f.call({action:v,location:d})}function y(a,e){function l(){y(a,e)}var g=r.Push,n=z(a,e);\"production\"!==process.env.NODE_ENV?D(\"/\"===n.pathname.charAt(0),\n\"Relative pathnames are not supported in hash history.push(\"+JSON.stringify(a)+\")\"):void 0;if(!c.length||(c.call({action:g,location:n,retry:l}),!1)){var G=[{usr:n.state,key:n.key,idx:q+1},x(n)];n=G[0];G=G[1];try{u.pushState(n,\"\",G)}catch(K){m.location.assign(G)}A(g)}}function w(a,e){function l(){w(a,e)}var g=r.Replace,n=z(a,e);\"production\"!==process.env.NODE_ENV?D(\"/\"===n.pathname.charAt(0),\"Relative pathnames are not supported in hash history.replace(\"+JSON.stringify(a)+\")\"):void 0;c.length&&(c.call({action:g,\nlocation:n,retry:l}),1)||(n=[{usr:n.state,key:n.key,idx:q},x(n)],u.replaceState(n[0],\"\",n[1]),A(g))}function p(a){u.go(a)}void 0===b&&(b={});b=b.window;var m=void 0===b?document.defaultView:b,u=m.history,t=null;m.addEventListener(\"popstate\",k);m.addEventListener(\"hashchange\",function(){var a=h()[1];I(a)!==I(d)&&k()});var v=r.Pop;b=h();var q=b[0],d=b[1],f=F(),c=F();null==q&&(q=0,u.replaceState(_extends({},u.state,{idx:q}),\"\"));return{get action(){return v},get location(){return d},createHref:x,push:y,\nreplace:w,go:p,back:function(){p(-1)},forward:function(){p(1)},listen:function(a){return f.push(a)},block:function(a){var e=c.push(a);1===c.length&&m.addEventListener(\"beforeunload\",E);return function(){e();c.length||m.removeEventListener(\"beforeunload\",E)}}}};\nfunction createMemoryHistory(b){function h(d,f){void 0===f&&(f=null);return C(_extends({},t,\"string\"===typeof d?J(d):d,{state:f,key:H()}))}function k(d,f,c){return!q.length||(q.call({action:d,location:f,retry:c}),!1)}function x(d,f){u=d;t=f;v.call({action:u,location:t})}function z(d,f){var c=r.Push,a=h(d,f);\"production\"!==process.env.NODE_ENV?D(\"/\"===t.pathname.charAt(0),\"Relative pathnames are not supported in memory history.push(\"+JSON.stringify(d)+\")\"):void 0;k(c,a,function(){z(d,f)})&&\n(m+=1,p.splice(m,p.length,a),x(c,a))}function A(d,f){var c=r.Replace,a=h(d,f);\"production\"!==process.env.NODE_ENV?D(\"/\"===t.pathname.charAt(0),\"Relative pathnames are not supported in memory history.replace(\"+JSON.stringify(d)+\")\"):void 0;k(c,a,function(){A(d,f)})&&(p[m]=a,x(c,a))}function y(d){var f=Math.min(Math.max(m+d,0),p.length-1),c=r.Pop,a=p[f];k(c,a,function(){y(d)})&&(m=f,x(c,a))}void 0===b&&(b={});var w=b;b=w.initialEntries;w=w.initialIndex;var p=(void 0===b?[\"/\"]:b).map(function(d){var f=\nC(_extends({pathname:\"/\",search:\"\",hash:\"\",state:null,key:H()},\"string\"===typeof d?J(d):d));\"production\"!==process.env.NODE_ENV?D(\"/\"===f.pathname.charAt(0),\"Relative pathnames are not supported in createMemoryHistory({ initialEntries }) (invalid entry: \"+JSON.stringify(d)+\")\"):void 0;return f}),m=Math.min(Math.max(null==w?p.length-1:w,0),p.length-1),u=r.Pop,t=p[m],v=F(),q=F();return{get index(){return m},get action(){return u},get location(){return t},createHref:function(d){return\"string\"===typeof d?\nd:I(d)},push:z,replace:A,go:y,back:function(){y(-1)},forward:function(){y(1)},listen:function(d){return v.push(d)},block:function(d){return q.push(d)}}};export{r as Action,createBrowserHistory,createHashHistory,createMemoryHistory,I as createPath,J as parsePath}\n//# sourceMappingURL=index.js.map\n","import * as React from 'react'\n\nimport {\n  createHashHistory,\n  createBrowserHistory,\n  createMemoryHistory,\n  BrowserHistory,\n  MemoryHistory,\n  History,\n  HashHistory,\n} from 'history'\n\nexport { createHashHistory, createBrowserHistory, createMemoryHistory }\n\n// Types\n\ntype Timeout = ReturnType<typeof setTimeout>\n\ntype Maybe<T, TUnknown> = T extends {} ? T : TUnknown\n\nexport type DefaultGenerics = {\n  LoaderData: LoaderData<unknown>\n  Params: Params<string>\n  Search: Search<unknown>\n  RouteMeta: RouteMeta<unknown>\n}\n\nexport type PartialGenerics = Partial<DefaultGenerics>\n\nexport type MakeGenerics<TGenerics extends PartialGenerics> = TGenerics\n\nexport type Search<T> = Record<string, T>\nexport type Params<T> = Record<string, T>\nexport type LoaderData<T> = Record<string, T>\nexport type RouteMeta<T> = Record<string, T>\n\nexport type UseGeneric<\n  TGenerics extends PartialGenerics,\n  TGeneric extends keyof PartialGenerics,\n> = TGeneric extends 'LoaderData' | 'Search'\n  ? Partial<Maybe<TGenerics[TGeneric], DefaultGenerics[TGeneric]>>\n  : Maybe<TGenerics[TGeneric], DefaultGenerics[TGeneric]>\n\nexport type ReactLocationOptions = {\n  // The history object to be used internally by react-location\n  // A history will be created automatically if not provided.\n  history?: BrowserHistory | MemoryHistory | HashHistory\n  stringifySearch?: SearchSerializer\n  parseSearch?: SearchParser\n}\n\ntype SearchSerializer = (searchObj: Record<string, any>) => string\ntype SearchParser = (searchStr: string) => Record<string, any>\n\nexport type Updater<TResult> = TResult | ((prev?: TResult) => TResult)\n\nexport type Location<TGenerics extends PartialGenerics = DefaultGenerics> = {\n  href: string\n  pathname: string\n  search: UseGeneric<TGenerics, 'Search'>\n  searchStr: string\n  hash: string\n  key?: string\n  // nextAction?: 'push' | 'replace'\n}\n\nexport type Route<TGenerics extends PartialGenerics = DefaultGenerics> = {\n  // The path to match (relative to the nearest parent `Route` component or root basepath)\n  path?: string\n  // An ID to uniquely identify this route within its siblings. This is only required for routes that *only match on search* or if you have multiple routes with the same path\n  id?: string\n  // If true, this route will be matched as case-sensitive\n  caseSensitive?: boolean\n  // Either (1) an object that will be used to shallowly match the current location's search or (2) A function that receives the current search params and can return truthy if they are matched.\n  search?: SearchPredicate<UseGeneric<TGenerics, 'Search'>>\n  // The duration to wait during `loader` execution before showing the `pendingElement`\n  pendingMs?: number\n  // _If the `pendingElement` is shown_, the minimum duration for which it will be visible.\n  pendingMinMs?: number\n  // Search filters can be used to rewrite, persist, default and manipulate search params for link that\n  // point to their routes or child routes. See the \"basic\" example to see them in action.\n  searchFilters?: SearchFilter<TGenerics>[]\n  // An array of child routes\n  children?: Route<TGenerics>[]\n  // Route Loaders (see below) can be inline on the route, or resolved async\n} & RouteLoaders<TGenerics> & {\n    // If `import` is defined, this route can resolve its elements and loaders in a single asynchronous call\n    // This is particularly useful for code-splitting or module federation\n    import?: (opts: {\n      params: UseGeneric<TGenerics, 'Params'>\n      search: UseGeneric<TGenerics, 'Search'>\n    }) => Promise<RouteLoaders<TGenerics>>\n  }\n\nexport type RouteLoaders<TGenerics> = {\n  // The content to be rendered when the route is matched. If no element is provided, defaults to `<Outlet />`\n  element?: SyncOrAsyncElement<TGenerics>\n  // The content to be rendered when `loader` encounters an error\n  errorElement?: SyncOrAsyncElement<TGenerics>\n  // The content to be rendered when the duration of `loader` execution surpasses the `pendingMs` duration\n  pendingElement?: SyncOrAsyncElement<TGenerics>\n  // An asynchronous function responsible for preparing or fetching data for the route before it is rendered\n  loader?: LoaderFn<TGenerics>\n  // An asynchronous function responsible for cleaning up when the match cache is cleared. This is useful when\n  // the loader function has side effects that need to be cleaned up when the match is no longer in use.\n  unloader?: UnloaderFn<TGenerics>\n  // An integer of milliseconds representing how long data should be cached for the route\n  loaderMaxAge?: number\n  // Similar to React's useEffect hook, this function is called\n  // when moving from an inactive state to an active one. Likewise, when moving from\n  // an active to an inactive state, the return function (if provided) is called.\n  onMatch?: (\n    match: RouteMatch<TGenerics>,\n  ) => void | undefined | ((match: RouteMatch<TGenerics>) => void)\n  // This function is called when the route remains active from one transition to the next.\n  onTransition?: (match: RouteMatch<TGenerics>) => void\n  // An object of whatever you want! This object is accessible anywhere matches are.\n  meta?: UseGeneric<TGenerics, 'RouteMeta'>\n}\n\nexport type SearchFilter<TGenerics> = (\n  prev: UseGeneric<TGenerics, 'Search'>,\n  next: UseGeneric<TGenerics, 'Search'>,\n) => UseGeneric<TGenerics, 'Search'>\n\nexport type MatchLocation<TGenerics extends PartialGenerics = DefaultGenerics> =\n  {\n    to?: string | number | null\n    search?: SearchPredicate<UseGeneric<TGenerics, 'Search'>>\n    fuzzy?: boolean\n    caseSensitive?: boolean\n  }\n\nexport type SearchPredicate<TSearch> = (search: TSearch) => any\n\nexport type SyncOrAsyncElement<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = React.ReactNode | AsyncElement<TGenerics>\n\nexport type AsyncElement<TGenerics extends PartialGenerics = DefaultGenerics> =\n  (opts: {\n    params: UseGeneric<TGenerics, 'Params'>\n  }) => Promise<React.ReactNode>\n\nexport type UnloadedMatch<TGenerics extends PartialGenerics = DefaultGenerics> =\n  {\n    id: string\n    route: Route<TGenerics>\n    pathname: string\n    params: UseGeneric<TGenerics, 'Params'>\n    search: UseGeneric<TGenerics, 'Search'>\n  }\n\nexport type LoaderFn<TGenerics extends PartialGenerics = DefaultGenerics> = (\n  routeMatch: RouteMatch<TGenerics>,\n  opts: LoaderFnOptions<TGenerics>,\n) => PromiseLike<UseGeneric<TGenerics, 'LoaderData'>>\n\nexport type UnloaderFn<TGenerics extends PartialGenerics = DefaultGenerics> = (\n  routeMatch: RouteMatch<TGenerics>,\n) => void\n\nexport type LoaderFnOptions<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = {\n  parentMatch?: RouteMatch<TGenerics>\n  dispatch: (event: LoaderDispatchEvent<TGenerics>) => void\n}\n\ntype PromiseLike<T> = Promise<T> | T\n\nexport type ListenerFn = () => void\n\nexport type Segment = {\n  type: 'pathname' | 'param' | 'wildcard'\n  value: string\n}\n\nexport type RouterProps<TGenerics extends PartialGenerics = DefaultGenerics> = {\n  // Children will default to `<Outlet />` if not provided\n  children?: React.ReactNode\n  location: ReactLocation<TGenerics>\n} & RouterOptions<TGenerics>\n\nexport type RouterOptions<TGenerics> = {\n  // An array of route objects to match\n  routes: Route<TGenerics>[]\n  basepath?: string\n  filterRoutes?: FilterRoutesFn\n  defaultLinkPreloadMaxAge?: number\n  defaultLoaderMaxAge?: number\n  useErrorBoundary?: boolean\n  defaultElement?: SyncOrAsyncElement<TGenerics>\n  defaultErrorElement?: SyncOrAsyncElement<TGenerics>\n  defaultPendingElement?: SyncOrAsyncElement<TGenerics>\n  defaultPendingMs?: number\n  defaultPendingMinMs?: number\n  caseSensitive?: boolean\n  // An array of route match objects that have been both _matched_ and _loaded_. See the [SRR](#ssr) section for more details\n  // snapshot?: RouterSnapshot<TGenerics>\n}\n\nexport type RouterSnapshot<TGenerics> = {\n  // matches: Partial<RouteMatch<TGenerics>>[]\n  location: Location<TGenerics>\n  matches: SnapshotRouteMatch<TGenerics>[]\n}\n\nexport type SnapshotRouteMatch<TGenerics> = {\n  id: string\n  ownData: UseGeneric<TGenerics, 'LoaderData'>\n}\n\nexport type BuildNextOptions<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = {\n  to?: string | number | null\n  search?: true | Updater<UseGeneric<TGenerics, 'Search'>>\n  hash?: Updater<string>\n  from?: Partial<Location<TGenerics>>\n  key?: string\n  __searchFilters?: SearchFilter<TGenerics>[]\n}\n\nexport type NavigateOptions<TGenerics> = BuildNextOptions<TGenerics> & {\n  replace?: boolean\n  fromCurrent?: boolean\n}\n\nexport type PromptProps = {\n  message: string\n  when?: boolean | any\n  children?: React.ReactNode\n}\n\nexport type LinkProps<TGenerics extends PartialGenerics = DefaultGenerics> =\n  Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, 'href' | 'children'> & {\n    // The absolute or relative destination pathname\n    to?: string | number | null\n    // The new search object or a function to update it\n    search?: true | Updater<UseGeneric<TGenerics, 'Search'>>\n    // The new has string or a function to update it\n    hash?: Updater<string>\n    // Whether to replace the current history stack instead of pushing a new one\n    replace?: boolean\n    // A function that is passed the [Location API](#location-api) and returns additional props for the `active` state of this link. These props override other props passed to the link (`style`'s are merged, `className`'s are concatenated)\n    getActiveProps?: () => Record<string, any>\n    // A function that is passed the [Location API](#location-api) and returns additional props for the `inactive` state of this link. These props override other props passed to the link (`style`'s are merged, `className`'s are concatenated)\n    getInactiveProps?: () => Record<string, any>\n    // Defaults to `{ exact: false, includeHash: false }`\n    activeOptions?: ActiveOptions\n    // If set, will preload the linked route on hover and cache it for this many milliseconds in hopes that the user will eventually navigate there.\n    preload?: number\n    // If true, will render the link without the href attribute\n    disabled?: boolean\n    // A custom ref prop because of this: https://stackoverflow.com/questions/58469229/react-with-typescript-generics-while-using-react-forwardref/58473012\n    _ref?: React.Ref<HTMLAnchorElement>\n    // If a function is pass as a child, it will be given the `isActive` boolean to aid in further styling on the element it returns\n    children?:\n      | React.ReactNode\n      | ((state: { isActive: boolean }) => React.ReactNode)\n  }\n\ntype ActiveOptions = {\n  exact?: boolean\n  includeHash?: boolean\n}\n\nexport type LinkPropsType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  LinkProps<TGenerics>\n\nexport type LoaderDispatchEvent<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> =\n  | {\n      type: 'maxAge'\n      maxAge: number\n    }\n  | {\n      type: 'loading'\n    }\n  | {\n      type: 'resolve'\n      data: UseGeneric<TGenerics, 'LoaderData'>\n    }\n  | {\n      type: 'reject'\n      error: unknown\n    }\n\nexport type LoadRouteFn<TGenerics> = (\n  next: Location<TGenerics>,\n) => MatchLoader<TGenerics>\n\nexport type TransitionState<TGenerics> = {\n  location: Location<TGenerics>\n  matches: RouteMatch<TGenerics>[]\n}\n\nexport type FilterRoutesFn = <\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(\n  routes: Route<TGenerics>[],\n) => Route<TGenerics>[]\n\nexport type RouterPropsType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = RouterProps<TGenerics>\n\nexport type RouterType<TGenerics extends PartialGenerics = DefaultGenerics> = (\n  props: RouterProps<TGenerics>,\n) => JSX.Element\n\ntype Listener = () => void\n\n// Source\n\nconst LocationContext = React.createContext<{ location: ReactLocation<any> }>(\n  null!,\n)\nconst MatchesContext = React.createContext<RouteMatch<any>[]>(null!)\nconst routerContext = React.createContext<{ router: RouterInstance<any> }>(\n  null!,\n)\n\n// Detect if we're in the DOM\nconst isDOM = Boolean(\n  typeof window !== 'undefined' &&\n    window.document &&\n    window.document.createElement,\n)\n\nconst useLayoutEffect = isDOM ? React.useLayoutEffect : React.useEffect\n\n// This is the default history object if none is defined\nconst createDefaultHistory = () =>\n  isDOM ? createBrowserHistory() : createMemoryHistory()\n\nclass Subscribable {\n  listeners: Listener[]\n\n  constructor() {\n    this.listeners = []\n  }\n\n  subscribe(listener: Listener): () => void {\n    this.listeners.push(listener as Listener)\n\n    return () => {\n      this.listeners = this.listeners.filter((x) => x !== listener)\n    }\n  }\n\n  notify(): void {\n    this.listeners.forEach((listener) => listener())\n  }\n}\n\nexport class ReactLocation<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> extends Subscribable {\n  history: BrowserHistory | MemoryHistory\n  stringifySearch: SearchSerializer\n  parseSearch: SearchParser\n\n  current: Location<TGenerics>\n  destroy: () => void\n  navigateTimeout?: Timeout\n  nextAction?: 'push' | 'replace'\n\n  //\n\n  isTransitioning: boolean = false\n\n  constructor(options?: ReactLocationOptions) {\n    super()\n    this.history = options?.history || createDefaultHistory()\n    this.stringifySearch = options?.stringifySearch ?? defaultStringifySearch\n    this.parseSearch = options?.parseSearch ?? defaultParseSearch\n\n    this.current = this.parseLocation(this.history.location)\n\n    this.destroy = this.history.listen((event) => {\n      this.current = this.parseLocation(event.location, this.current)\n      this.notify()\n    })\n  }\n\n  buildNext(\n    basepath: string = '/',\n    dest: BuildNextOptions<TGenerics> = {},\n  ): Location<TGenerics> {\n    const from = {\n      ...this.current,\n      ...dest.from,\n    }\n\n    const pathname = resolvePath(basepath, from.pathname, `${dest.to ?? '.'}`)\n\n    const updatedSearch =\n      (dest.search === true\n        ? from.search\n        : functionalUpdate(dest.search, from.search)) ?? {}\n\n    const filteredSearch = dest.__searchFilters?.length\n      ? dest.__searchFilters.reduce(\n          (prev, next) => next(prev, updatedSearch),\n          from.search,\n        )\n      : updatedSearch\n\n    const search = replaceEqualDeep(from.search, filteredSearch)\n\n    const searchStr = this.stringifySearch(search)\n    let hash = functionalUpdate(dest.hash, from.hash)\n    hash = hash ? `#${hash}` : ''\n\n    return {\n      pathname,\n      search,\n      searchStr,\n      hash,\n      href: `${pathname}${searchStr}${hash}`,\n      key: dest.key,\n    }\n  }\n\n  navigate(next: Location<TGenerics>, replace?: boolean): void {\n    this.current = next\n\n    if (this.navigateTimeout) clearTimeout(this.navigateTimeout)\n\n    let nextAction: 'push' | 'replace' = 'replace'\n\n    if (!this.nextAction) {\n      nextAction = replace ? 'replace' : 'push'\n    }\n\n    if (!replace) {\n      nextAction = 'push'\n    }\n\n    this.nextAction = nextAction\n\n    this.navigateTimeout = setTimeout(() => {\n      let nextAction = this.nextAction\n      delete this.nextAction\n\n      const isSameUrl =\n        this.parseLocation(this.history.location).href === this.current.href\n\n      if (isSameUrl && !this.current.key) {\n        nextAction = 'replace'\n      }\n\n      if (nextAction === 'replace') {\n        return this.history.replace({\n          pathname: this.current.pathname,\n          hash: this.current.hash,\n          search: this.current.searchStr,\n        })\n      }\n\n      return this.history.push({\n        pathname: this.current.pathname,\n        hash: this.current.hash,\n        search: this.current.searchStr,\n      })\n    }, 16)\n  }\n\n  parseLocation(\n    location: History['location'],\n    previousLocation?: Location<TGenerics>,\n  ): Location<TGenerics> {\n    const parsedSearch = this.parseSearch(location.search)\n\n    return {\n      pathname: location.pathname,\n      searchStr: location.search,\n      search: replaceEqualDeep(previousLocation?.search, parsedSearch),\n      hash: location.hash.split('#').reverse()[0] ?? '',\n      href: `${location.pathname}${location.search}${location.hash}`,\n      key: location.key,\n    }\n  }\n}\n\nexport type MatchesProviderProps<TGenerics> = {\n  value: RouteMatch<TGenerics>[]\n  children: React.ReactNode\n}\n\nexport function MatchesProvider<TGenerics>(\n  props: MatchesProviderProps<TGenerics>,\n) {\n  return <MatchesContext.Provider {...props} />\n}\n\nexport function Router<TGenerics extends PartialGenerics = DefaultGenerics>({\n  children,\n  location,\n  // snapshot,\n  ...rest\n}: RouterProps<TGenerics>) {\n  const routerRef = React.useRef<RouterInstance<TGenerics>>(null!)\n  if (!routerRef.current) {\n    routerRef.current = new RouterInstance<TGenerics>({\n      location,\n      // snapshot,\n      routes: rest.routes,\n    })\n  }\n  const router = routerRef.current\n\n  const [nonce, rerender] = React.useReducer(() => ({}), {})\n\n  router.update(rest)\n\n  useLayoutEffect(() => {\n    return router.subscribe(() => {\n      rerender()\n    })\n  }, [])\n\n  useLayoutEffect(() => {\n    return router.updateLocation(location.current).unsubscribe\n  }, [location.current.key])\n\n  const routerValue = React.useMemo(\n    () => ({\n      router,\n    }),\n    [nonce],\n  )\n\n  return (\n    <LocationContext.Provider value={{ location }}>\n      <routerContext.Provider value={routerValue}>\n        <MatchesProvider value={[router.rootMatch!, ...router.state.matches]}>\n          {children ?? <Outlet />}\n        </MatchesProvider>\n      </routerContext.Provider>\n    </LocationContext.Provider>\n  )\n}\n\ntype RouterInstanceState<TGenerics> = {\n  state: TransitionState<TGenerics>\n  pending?: TransitionState<TGenerics>\n}\n\nexport class RouterInstance<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> extends Subscribable {\n  basepath?: string\n  rootMatch?: RouteMatch<TGenerics>\n  state: TransitionState<TGenerics>\n  pending?: TransitionState<TGenerics>\n  routes!: Route<TGenerics>[]\n  filterRoutes?: FilterRoutesFn\n  defaultLinkPreloadMaxAge?: number\n  defaultLoaderMaxAge?: number\n  useErrorBoundary?: boolean\n  defaultElement: SyncOrAsyncElement<TGenerics>\n  defaultErrorElement: SyncOrAsyncElement<TGenerics>\n  defaultPendingElement: SyncOrAsyncElement<TGenerics>\n  defaultPendingMs?: number\n  defaultPendingMinMs?: number\n  caseSensitive?: boolean\n\n  routesById: Record<string, Route<TGenerics>> = {}\n\n  constructor({\n    location,\n    // snapshot,\n    ...rest\n  }: {\n    location: ReactLocation<TGenerics>\n    // snapshot?: RouterSnapshot<TGenerics>\n  } & RouterOptions<TGenerics>) {\n    super()\n\n    this.update(rest)\n\n    // if (snapshot) {\n    //   const matchLoader = new MatchLoader(this, location.current)\n    //   matchLoader.matches.forEach((match, index) => {\n    //     if (match.id !== snapshot.matches[index]?.id) {\n    //       throw new Error(\n    //         `Router hydration mismatch: ${match.id} !== ${snapshot.matches[index]?.id}`,\n    //       )\n    //     }\n    //     match.ownData = snapshot.matches[index]?.ownData ?? {}\n    //   })\n    //   cascadeMatchData(matchLoader.matches)\n    // }\n\n    this.state = {\n      // location: snapshot?.location ?? location.current,\n      // matches: matchLoader.matches,\n      location: location.current,\n      matches: [],\n    }\n\n    location.subscribe(() => this.notify())\n  }\n\n  update = ({ basepath, routes, ...opts }: RouterOptions<TGenerics>) => {\n    Object.assign(this, opts)\n\n    this.basepath = cleanPath(`/${basepath ?? ''}`)\n\n    this.routesById = {}\n\n    const recurseRoutes = (\n      routes: Route<TGenerics>[],\n      parent?: Route<TGenerics>,\n    ): Route<TGenerics>[] => {\n      return routes.map((route) => {\n        const path = route.path ?? '*'\n\n        const id = joinPaths([\n          parent?.id === 'root' ? '' : parent?.id,\n          `${path?.replace(/(.)\\/$/, '$1')}${route.id ? `-${route.id}` : ''}`,\n        ])\n\n        route = {\n          ...route,\n          pendingMs: route.pendingMs ?? opts?.defaultPendingMs,\n          pendingMinMs: route.pendingMinMs ?? opts?.defaultPendingMinMs,\n          id,\n        }\n\n        if (this.routesById[id]) {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn(\n              `Duplicate routes found with id: ${id}`,\n              this.routesById,\n              route,\n            )\n          }\n          throw new Error()\n        }\n\n        this.routesById[id] = route\n\n        route.children = route.children?.length\n          ? recurseRoutes(route.children, route)\n          : undefined\n\n        return route\n      })\n    }\n\n    this.routes = recurseRoutes(routes)\n\n    this.rootMatch = {\n      id: 'root',\n      params: {} as any,\n      search: {} as any,\n      pathname: this.basepath,\n      route: null!,\n      ownData: {},\n      data: {},\n      isLoading: false,\n      status: 'resolved',\n    }\n  }\n\n  setState = (\n    updater: (\n      old: RouterInstanceState<TGenerics>,\n    ) => RouterInstanceState<TGenerics>,\n  ) => {\n    const newState = updater({ state: this.state, pending: this.pending })\n    this.state = newState.state\n    this.pending = newState.pending\n    this.cleanMatchCache()\n    this.notify()\n  }\n\n  matchCache: Record<string, RouteMatch<TGenerics>> = {}\n\n  cleanMatchCache = () => {\n    const activeMatchIds = [\n      ...(this?.state.matches ?? []),\n      ...(this?.pending?.matches ?? []),\n    ].map((d) => d.id)\n\n    Object.values(this.matchCache).forEach((match) => {\n      if (!match.updatedAt) {\n        return\n      }\n\n      if (activeMatchIds.includes(match.id)) {\n        return\n      }\n\n      const age = Date.now() - (match.updatedAt ?? 0)\n\n      if (!match.maxAge || age > match.maxAge) {\n        if (match.route.unloader) {\n          match.route.unloader(match)\n        }\n\n        delete this.matchCache[match.id]\n      }\n    })\n  }\n\n  updateLocation = (next: Location<TGenerics>) => {\n    let unsubscribe: () => void\n\n    const promise = new Promise<void>((resolve) => {\n      const matchLoader = new MatchLoader(this, next)\n\n      this.setState((old) => {\n        return {\n          ...old,\n          pending: {\n            location: matchLoader.location,\n            matches: matchLoader.matches,\n          },\n        }\n      })\n\n      unsubscribe = matchLoader.subscribe(() => {\n        const currentMatches = this.state.matches\n\n        currentMatches\n          .filter((d) => {\n            return !matchLoader.matches.find((dd) => dd.id === d.id)\n          })\n          .forEach((d) => {\n            d.onExit?.(d)\n          })\n\n        currentMatches\n          .filter((d) => {\n            return matchLoader.matches.find((dd) => dd.id === d.id)\n          })\n          .forEach((d) => {\n            d.route.onTransition?.(d)\n          })\n\n        matchLoader.matches\n          .filter((d) => {\n            return !currentMatches.find((dd) => dd.id === d.id)\n          })\n          .forEach((d) => {\n            d.onExit = d.route.onMatch?.(d)\n          })\n\n        this.setState((old) => {\n          return {\n            ...old,\n            state: {\n              location: matchLoader.location,\n              matches: matchLoader.matches,\n            },\n            pending: undefined,\n          }\n        })\n\n        resolve()\n      })\n\n      matchLoader.loadData()\n      matchLoader.startPending()\n    })\n\n    return {\n      promise,\n      unsubscribe: unsubscribe!,\n    }\n  }\n\n  // snapshot = (): RouterSnapshot<TGenerics> => {\n  //   return {\n  //     location: this.state.location,\n  //     matches: this.state.matches.map(({ ownData, id }) => {\n  //       return {\n  //         id,\n  //         ownData,\n  //       }\n  //     }),\n  //   }\n  // }\n}\n\nexport type UseLocationType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = () => ReactLocation<TGenerics>\n\nexport function useLocation<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): ReactLocation<TGenerics> {\n  // const getIsMounted = useGetIsMounted()\n  // const [, rerender] = React.useReducer((d) => d + 1, 0)\n  const context = React.useContext(LocationContext) as {\n    location: ReactLocation<TGenerics>\n  }\n  warning(!!context, 'useLocation must be used within a <ReactLocation />')\n\n  // useLayoutEffect(() => {\n  //   return instance.subscribe(() => {\n  //     // Rerender all subscribers in a microtask\n  //     Promise.resolve().then(() => {\n  //       // setTimeout(function renderAllLocationSubscribers() {\n  //       if (getIsMounted()) {\n  //         rerender()\n  //       }\n  //       // }, 0)\n  //     })\n  //   })\n  // }, [instance])\n\n  return context.location\n}\n\nexport class RouteMatch<TGenerics extends PartialGenerics = DefaultGenerics> {\n  id!: string\n  route!: Route<TGenerics>\n  pathname!: string\n  params!: UseGeneric<TGenerics, 'Params'>\n  search!: UseGeneric<TGenerics, 'Search'>\n  updatedAt?: number\n  element?: React.ReactNode\n  errorElement?: React.ReactNode\n  pendingElement?: React.ReactNode\n  error?: unknown\n  loaderPromise?: Promise<UseGeneric<TGenerics, 'LoaderData'>>\n  maxAge?: number\n  matchLoader?: MatchLoader<TGenerics>\n  pendingTimeout?: Timeout\n  pendingMinPromise?: Promise<void>\n  onExit?: void | ((match: RouteMatch<TGenerics>) => void)\n\n  constructor(unloadedMatch: UnloadedMatch<TGenerics>) {\n    Object.assign(this, unloadedMatch)\n  }\n\n  status: 'loading' | 'pending' | 'resolved' | 'rejected' = 'loading'\n  ownData: UseGeneric<TGenerics, 'LoaderData'> = {}\n  data: UseGeneric<TGenerics, 'LoaderData'> = {}\n  isLoading: boolean = false\n\n  private notify? = (isSoft?: boolean) => {\n    this.matchLoader?.preNotify(isSoft)\n  }\n\n  assignMatchLoader? = (matchLoader: MatchLoader<TGenerics>) => {\n    this.matchLoader = matchLoader\n  }\n\n  startPending? = () => {\n    if (this.pendingTimeout) {\n      clearTimeout(this.pendingTimeout)\n    }\n\n    if (this.route.pendingMs !== undefined) {\n      this.pendingTimeout = setTimeout(() => {\n        if (this.status === 'loading') {\n          this.status = 'pending'\n        }\n        this.notify?.()\n        if (typeof this.route.pendingMinMs !== 'undefined') {\n          this.pendingMinPromise = new Promise((r) =>\n            setTimeout(r, this.route.pendingMinMs),\n          )\n        }\n      }, this.route.pendingMs)\n    }\n  }\n\n  load? = (opts: {\n    maxAge?: number\n    parentMatch?: RouteMatch<TGenerics>\n    router: RouterInstance<TGenerics>\n  }) => {\n    this.maxAge =\n      opts.maxAge ?? this.route.loaderMaxAge ?? opts.router.defaultLoaderMaxAge\n\n    if (this.loaderPromise) {\n      return\n    }\n\n    const importer = this.route.import\n\n    // First, run any importers\n    this.loaderPromise = (\n      !importer\n        ? Promise.resolve()\n        : importer({ params: this.params, search: this.search }).then(\n            (imported) => {\n              this.route = {\n                ...this.route,\n                ...imported,\n              }\n            },\n          )\n    )\n      // then run all element and data loaders in parallel\n      .then(() => {\n        const elementPromises: Promise<void>[] = []\n\n        // For each element type, potentially load it asynchronously\n        const elementTypes = [\n          'element',\n          'errorElement',\n          'pendingElement',\n        ] as const\n\n        elementTypes.forEach((type) => {\n          const routeElement = this.route[type]\n\n          if (this[type]) {\n            return\n          }\n\n          if (typeof routeElement === 'function') {\n            elementPromises.push(\n              (routeElement as AsyncElement)(this).then((res) => {\n                this[type] = res\n              }),\n            )\n          } else {\n            this[type] = this.route[type]\n          }\n        })\n\n        const loader = this.route.loader\n\n        const dataPromise = !loader\n          ? Promise.resolve().then(() => {\n              this.status = 'resolved'\n            })\n          : new Promise(async (resolveLoader) => {\n              let pendingTimeout: Timeout\n\n              const resolve = (data: any) => {\n                this.status = 'resolved'\n                this.ownData = data\n                this.error = undefined\n              }\n\n              const reject = (err: any) => {\n                console.error(err)\n                this.status = 'rejected'\n                this.error = err\n              }\n\n              const finish = () => {\n                this.isLoading = false\n                this.startPending = undefined\n                clearTimeout(pendingTimeout)\n                resolveLoader(this.ownData)\n                this.notify?.(true)\n              }\n\n              try {\n                this.isLoading = true\n\n                resolve(\n                  await loader(this, {\n                    parentMatch: opts.parentMatch,\n                    dispatch: async (event) => {\n                      if (event.type === 'resolve') {\n                        resolve(event.data)\n                      } else if (event.type === 'reject') {\n                        reject(event.error)\n                      } else if (event.type === 'loading') {\n                        this.isLoading = true\n                      } else if (event.type === 'maxAge') {\n                        this.maxAge = event.maxAge\n                      }\n\n                      this.updatedAt = Date.now()\n                      this.notify?.(true)\n                    },\n                  }),\n                )\n                await this.pendingMinPromise\n                finish()\n              } catch (err) {\n                reject(err)\n                finish()\n              }\n            })\n\n        return Promise.all([...elementPromises, dataPromise]).then(() => {\n          this.updatedAt = Date.now()\n        })\n      })\n      .then(() => {\n        return this.ownData\n      })\n  }\n}\n\nclass MatchLoader<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> extends Subscribable {\n  router: RouterInstance<TGenerics>\n  location: Location<TGenerics>\n  matches: RouteMatch<TGenerics>[]\n  prepPromise?: Promise<void>\n  matchPromise?: Promise<UnloadedMatch<TGenerics>[]>\n  firstRenderPromises?: Promise<any>[]\n\n  constructor(\n    router: RouterInstance<TGenerics>,\n    nextLocation: Location<TGenerics>,\n  ) {\n    super()\n    this.router = router\n    this.location = nextLocation\n    this.matches = []\n\n    const unloadedMatches = matchRoutes(this.router, this.location)\n\n    this.matches = unloadedMatches?.map(\n      (unloadedMatch): RouteMatch<TGenerics> => {\n        if (!this.router.matchCache[unloadedMatch.id]) {\n          this.router.matchCache[unloadedMatch.id] = new RouteMatch(\n            unloadedMatch,\n          )\n        }\n\n        return this.router.matchCache[unloadedMatch.id]!\n      },\n    )\n  }\n\n  status: 'pending' | 'resolved' = 'pending'\n\n  preNotify = (isSoft?: boolean) => {\n    if (!isSoft) {\n      this.status = 'resolved'\n    }\n\n    cascadeMatchData(this.matches)\n    this.notify()\n  }\n\n  loadData = async ({ maxAge }: { maxAge?: number } = {}) => {\n    this.router.cleanMatchCache()\n\n    if (!this.matches?.length) {\n      this.preNotify()\n      return\n    }\n\n    this.firstRenderPromises = []\n\n    this.matches.forEach((match, index) => {\n      const parentMatch = this.matches?.[index - 1]\n      match.assignMatchLoader?.(this)\n      match.load?.({ maxAge, parentMatch, router: this.router })\n      this.firstRenderPromises?.push(match.loaderPromise!)\n    })\n\n    return await Promise.all(this.firstRenderPromises).then(() => {\n      this.preNotify()\n      return this.matches\n    })\n  }\n\n  load = async ({ maxAge }: { maxAge?: number } = {}) => {\n    return await this.loadData({ maxAge })\n  }\n\n  startPending = async () => {\n    this.matches.forEach((match) => match.startPending?.())\n  }\n}\n\nfunction cascadeMatchData<TGenerics>(matches?: RouteMatch<TGenerics>[]) {\n  matches?.forEach((match, index) => {\n    const parentMatch = matches?.[index - 1]\n\n    match.data = {\n      ...(parentMatch?.data ?? ({} as any)),\n      ...match.ownData,\n    }\n  })\n}\n\nexport type UseRouterType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  () => RouterInstance<TGenerics>\n\nexport function useRouter<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): RouterInstance<TGenerics> {\n  const value = React.useContext(routerContext)\n  if (!value) {\n    warning(true, 'You are trying to use useRouter() outside of ReactLocation!')\n    throw new Error()\n  }\n\n  return value.router as RouterInstance<TGenerics>\n}\n\nexport interface MatchRoutesOptions<TGenerics> {\n  filterRoutes?: FilterRoutesFn\n  defaultPendingMs?: number\n  defaultPendingMinMs?: number\n  defaultElement?: SyncOrAsyncElement<TGenerics>\n  defaultErrorElement?: SyncOrAsyncElement<TGenerics>\n  defaultPendingElement?: SyncOrAsyncElement<TGenerics>\n}\n\nexport type MatchRoutesType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = (\n  router: RouterInstance<TGenerics>[],\n  currentLocation: Location<TGenerics>,\n) => Promise<UnloadedMatch<TGenerics>[]>\n\nexport function matchRoutes<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(\n  router: RouterInstance<TGenerics>,\n  currentLocation: Location<TGenerics>,\n): UnloadedMatch<TGenerics>[] {\n  if (!router.routes.length) {\n    return []\n  }\n\n  const matches: UnloadedMatch<TGenerics>[] = []\n\n  const recurse = async (\n    routes: Route<TGenerics>[],\n    parentMatch: UnloadedMatch<TGenerics>,\n  ): Promise<void> => {\n    let { pathname, params } = parentMatch\n    const filteredRoutes = router?.filterRoutes\n      ? router?.filterRoutes(routes)\n      : routes\n\n    const route = filteredRoutes.find((route) => {\n      const fullRoutePathName = joinPaths([pathname, route.path])\n\n      const fuzzy = !!(route.path !== '/' || route.children?.length)\n\n      const matchParams = matchRoute(currentLocation, {\n        to: fullRoutePathName,\n        search: route.search,\n        fuzzy,\n        caseSensitive: route.caseSensitive ?? router.caseSensitive,\n      })\n\n      if (matchParams) {\n        params = {\n          ...params,\n          ...matchParams,\n        }\n      }\n\n      return !!matchParams\n    })\n\n    if (!route) {\n      return\n    }\n\n    const interpolatedPath = interpolatePath(route.path, params)\n    pathname = joinPaths([pathname, interpolatedPath])\n\n    const interpolatedId = interpolatePath(route.id, params, true)\n\n    const match: UnloadedMatch<TGenerics> = {\n      id: interpolatedId,\n      route,\n      params,\n      pathname,\n      search: currentLocation.search,\n    }\n\n    matches.push(match)\n\n    if (route.children?.length) {\n      recurse(route.children, match)\n    }\n  }\n\n  recurse(router.routes, router.rootMatch!)\n\n  return matches\n}\n\nfunction interpolatePath(\n  path: string | undefined,\n  params: any,\n  leaveWildcard?: boolean,\n) {\n  const interpolatedPathSegments = parsePathname(path)\n\n  return joinPaths(\n    interpolatedPathSegments.map((segment) => {\n      if (segment.value === '*' && !leaveWildcard) {\n        return ''\n      }\n\n      if (segment.type === 'param') {\n        return params![segment.value.substring(1)] ?? ''\n      }\n\n      return segment.value\n    }),\n  )\n}\n\nexport type UseLoadRouteType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = (routes?: Route<TGenerics>[]) => void\n\nexport function useLoadRoute<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>() {\n  const location = useLocation<TGenerics>()\n  const match = useMatch<TGenerics>()\n  const router = useRouter<TGenerics>()\n  const buildNext = useBuildNext<TGenerics>()\n\n  return useLatestCallback(\n    async (\n      navigate: NavigateOptions<TGenerics> = location.current,\n      opts?: { maxAge?: number },\n    ) => {\n      const next = buildNext({\n        ...navigate,\n        from: navigate.from ?? { pathname: match.pathname },\n      })\n\n      const matchLoader = new MatchLoader(router, next)\n\n      return await matchLoader.load(opts)\n    },\n  )\n}\n\nexport type UseMatchesType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = () => RouteMatch<TGenerics>[]\n\nexport function useParentMatches<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): RouteMatch<TGenerics>[] {\n  const router = useRouter<TGenerics>()\n  const match = useMatch()\n\n  const matches = router.state.matches\n\n  return matches.slice(0, matches.findIndex((d) => d.id === match.id) - 1)\n}\n\nexport function useMatches<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): RouteMatch<TGenerics>[] {\n  return React.useContext(MatchesContext)\n}\n\nexport type UseMatchType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  () => RouteMatch<TGenerics>\n\nexport function useMatch<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): RouteMatch<TGenerics> {\n  return useMatches<TGenerics>()?.[0]!\n}\n\nexport type UseNavigateType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = (options: NavigateOptions<TGenerics>) => void\n\nexport function useNavigate<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>() {\n  const location = useLocation<TGenerics>()\n  const match = useMatch<TGenerics>()\n  const buildNext = useBuildNext<TGenerics>()\n\n  function navigate({\n    search,\n    hash,\n    replace,\n    from,\n    to,\n    fromCurrent,\n  }: NavigateOptions<TGenerics> & {\n    replace?: boolean\n  }) {\n    fromCurrent = fromCurrent ?? typeof to === 'undefined'\n\n    const next = buildNext({\n      to,\n      search,\n      hash,\n      from: fromCurrent\n        ? location.current\n        : from ?? { pathname: match.pathname },\n    })\n\n    location.navigate(next, replace)\n  }\n\n  return useLatestCallback(navigate)\n}\n\nexport type NavigateType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  (options: NavigateOptions<TGenerics>) => null\n\nexport function Navigate<TGenerics extends PartialGenerics = DefaultGenerics>(\n  options: NavigateOptions<TGenerics>,\n) {\n  let navigate = useNavigate<TGenerics>()\n\n  useLayoutEffect(() => {\n    navigate(options)\n  }, [navigate])\n\n  return null\n}\n\nfunction useBuildNext<TGenerics>() {\n  const location = useLocation<TGenerics>()\n  const router = useRouter<TGenerics>()\n\n  const buildNext = (opts: BuildNextOptions<TGenerics>) => {\n    const next = location.buildNext(router.basepath, opts)\n\n    const matches = matchRoutes<TGenerics>(router, next)\n\n    const __searchFilters = matches\n      .map((match) => match.route.searchFilters ?? [])\n      .flat()\n      .filter(Boolean)\n\n    return location.buildNext(router.basepath, { ...opts, __searchFilters })\n  }\n\n  return useLatestCallback(buildNext)\n}\n\nexport type LinkType<TGenerics extends PartialGenerics = DefaultGenerics> = (\n  props: LinkProps<TGenerics>,\n) => JSX.Element\n\nexport const Link = function Link<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>({\n  to = '.',\n  search,\n  hash,\n  children,\n  target,\n  style = {},\n  replace,\n  onClick,\n  onMouseEnter,\n  className = '',\n  getActiveProps = () => ({}),\n  getInactiveProps = () => ({}),\n  activeOptions,\n  preload,\n  disabled,\n  _ref,\n  ...rest\n}: LinkProps<TGenerics>) {\n  const loadRoute = useLoadRoute<TGenerics>()\n  const match = useMatch<TGenerics>()\n  const location = useLocation<TGenerics>()\n  const router = useRouter<TGenerics>()\n  const navigate = useNavigate<TGenerics>()\n  const buildNext = useBuildNext<TGenerics>()\n\n  preload = preload ?? router.defaultLinkPreloadMaxAge\n\n  // If this `to` is a valid external URL, log a warning\n  try {\n    const url = new URL(`${to}`)\n    warning(\n      false,\n      `<Link /> should not be used for external URLs like: ${url.href}`,\n    )\n  } catch (e) {}\n\n  const next = buildNext({\n    to,\n    search,\n    hash,\n    from: { pathname: match.pathname },\n  })\n\n  // The click handler\n  const handleClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    if (onClick) onClick(e)\n\n    if (\n      !isCtrlEvent(e) &&\n      !e.defaultPrevented &&\n      (!target || target === '_self') &&\n      e.button === 0\n    ) {\n      e.preventDefault()\n      // All is well? Navigate!\n      navigate({\n        to,\n        search,\n        hash,\n        replace,\n        from: { pathname: match.pathname },\n      })\n    }\n  }\n\n  // The click handler\n  const handleMouseEnter = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    if (onMouseEnter) onMouseEnter(e)\n\n    if (preload && preload > 0) {\n      loadRoute(\n        {\n          to,\n          search,\n          hash,\n        },\n        { maxAge: preload },\n      )\n    }\n  }\n\n  // Compare path/hash for matches\n  const pathIsEqual = location.current.pathname === next.pathname\n  const currentPathSplit = location.current.pathname.split('/')\n  const nextPathSplit = next.pathname.split('/')\n  const pathIsFuzzyEqual = nextPathSplit.every(\n    (d, i) => d === currentPathSplit[i],\n  )\n  const hashIsEqual = location.current.hash === next.hash\n\n  // Combine the matches based on user options\n  const pathTest = activeOptions?.exact ? pathIsEqual : pathIsFuzzyEqual\n  const hashTest = activeOptions?.includeHash ? hashIsEqual : true\n\n  // The final \"active\" test\n  const isActive = pathTest && hashTest\n\n  // Get the active props\n  const {\n    style: activeStyle = {},\n    className: activeClassName = '',\n    ...activeRest\n  } = isActive ? getActiveProps() : {}\n\n  // Get the inactive props\n  const {\n    style: inactiveStyle = {},\n    className: inactiveClassName = '',\n    ...inactiveRest\n  } = isActive ? {} : getInactiveProps()\n\n  return (\n    <a\n      {...{\n        ref: _ref,\n        href: disabled ? undefined : next.href,\n        onClick: handleClick,\n        onMouseEnter: handleMouseEnter,\n        target,\n        style: {\n          ...style,\n          ...activeStyle,\n          ...inactiveStyle,\n        },\n        className:\n          [className, activeClassName, inactiveClassName]\n            .filter(Boolean)\n            .join(' ') || undefined,\n        ...(disabled\n          ? {\n              role: 'link',\n              'aria-disabled': true,\n            }\n          : undefined),\n        ...rest,\n        ...activeRest,\n        ...inactiveRest,\n        children:\n          typeof children === 'function' ? children({ isActive }) : children,\n      }}\n    />\n  )\n}\n\nexport function Outlet<TGenerics extends PartialGenerics = DefaultGenerics>() {\n  const router = useRouter<TGenerics>()\n  const [_, ...matches] = useMatches<TGenerics>()\n\n  const match = matches[0]\n\n  if (!match) {\n    return null\n  }\n\n  const errorElement = match.errorElement ?? router.defaultErrorElement\n\n  const element = (() => {\n    if (match.status === 'rejected') {\n      if (errorElement) {\n        return errorElement\n      }\n\n      if (!router.useErrorBoundary) {\n        if (process.env.NODE_ENV !== 'production') {\n          const preStyle: React.HTMLAttributes<HTMLPreElement>['style'] = {\n            whiteSpace: 'normal',\n            display: 'inline-block',\n            background: 'rgba(0,0,0,.1)',\n            padding: '.1rem .2rem',\n            margin: '.1rem',\n            lineHeight: '1',\n            borderRadius: '.25rem',\n          }\n\n          return (\n            <div style={{ lineHeight: '1.7' }}>\n              <strong>\n                The following error occured in the loader for you route at:{' '}\n                <pre style={preStyle}>{match.pathname}</pre>\n              </strong>\n              .\n              <br />\n              <pre\n                style={{\n                  ...preStyle,\n                  display: 'block',\n                  padding: '.5rem',\n                  borderRadius: '.5rem',\n                }}\n              >\n                {(match.error as any).toString()}\n              </pre>\n              <br />\n              Your users won't see this message in production, but they will see{' '}\n              <strong>\"An unknown error occured!\"</strong>, which is at least\n              better than breaking your entire app. 😊 For a better UX, please\n              specify an <pre style={preStyle}>errorElement</pre> for all of\n              your routes that contain asynchronous behavior, or at least\n              provide your own\n              <pre style={preStyle}>ErrorBoundary</pre> wrapper around your\n              renders to both the elements rendered by{' '}\n              <pre style={preStyle}>\n                {'useRoutes(routes, { useErrorBoundary: true })'}\n              </pre>{' '}\n              and <pre style={preStyle}>{'<Router useErrorBoundary />'}</pre>.{' '}\n              <br />\n              <br />\n            </div>\n          )\n        }\n        return 'An unknown error occured!'\n      }\n\n      throw match.error\n    }\n\n    const pendingElement = match.pendingElement ?? router.defaultPendingElement\n\n    if (match.status === 'loading') {\n      return null\n    }\n\n    if (match.status === 'pending') {\n      if (match.route.pendingMs || pendingElement) {\n        return pendingElement ?? null\n      }\n    }\n\n    const matchElement = match.element ?? router.defaultElement\n\n    return matchElement ?? <Outlet />\n  })()\n\n  return <MatchesProvider value={matches}>{element}</MatchesProvider>\n}\n\nexport function useResolvePath<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>() {\n  const router = useRouter<TGenerics>()\n  const match = useMatch<TGenerics>()\n\n  return useLatestCallback((path: string) =>\n    resolvePath(router.basepath!, match.pathname!, cleanPath(path)),\n  )\n}\n\nexport type UseSearchType<TGenerics extends PartialGenerics = DefaultGenerics> =\n  () => Partial<Maybe<TGenerics['Search'], Search<any>>>\n\nexport function useSearch<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>() {\n  const location = useLocation<TGenerics>()\n  return location.current.search\n}\n\nexport type MatchRouteType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = (\n  currentLocation: Location<TGenerics>,\n  matchLocation: MatchLocation<TGenerics>,\n) => UseGeneric<TGenerics, 'Params'> | undefined\n\nexport function matchRoute<TGenerics extends PartialGenerics = DefaultGenerics>(\n  currentLocation: Location<TGenerics>,\n  matchLocation: MatchLocation<TGenerics>,\n): UseGeneric<TGenerics, 'Params'> | undefined {\n  const pathParams = matchByPath(currentLocation, matchLocation)\n  const searchMatched = matchBySearch(currentLocation, matchLocation)\n\n  if (matchLocation.to && !pathParams) {\n    return\n  }\n\n  if (matchLocation.search && !searchMatched) {\n    return\n  }\n\n  return (pathParams ?? {}) as UseGeneric<TGenerics, 'Params'>\n}\n\nexport type UseMatchRouteType<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n> = () => (\n  matchLocation: MatchLocation<TGenerics>,\n) => Maybe<TGenerics['Params'], Params<any>> | undefined\n\nexport type UseMatchRouteOptions<TGenerics> = MatchLocation<TGenerics> & {\n  pending?: boolean\n}\n\nexport function useMatchRoute<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(): (\n  matchLocation: UseMatchRouteOptions<TGenerics>,\n  opts?: { caseSensitive?: boolean },\n) => Maybe<TGenerics['Params'], Params<any>> | undefined {\n  const router = useRouter<TGenerics>()\n  const resolvePath = useResolvePath<TGenerics>()\n\n  return useLatestCallback(\n    ({\n      pending,\n      ...matchLocation\n    }: MatchLocation<TGenerics> & { pending?: boolean }) => {\n      matchLocation = {\n        ...matchLocation,\n        to: matchLocation.to ? resolvePath(`${matchLocation.to}`) : undefined,\n      }\n\n      if (pending) {\n        if (!router.pending?.location) {\n          return undefined\n        }\n        return matchRoute(router.pending.location, matchLocation)\n      }\n\n      return matchRoute(router.state.location, matchLocation)\n    },\n  )\n}\n\nexport function MatchRoute<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>({\n  children,\n  ...rest\n}: UseMatchRouteOptions<TGenerics> & {\n  children:\n    | React.ReactNode\n    | ((isNextLocation?: Params<TGenerics>) => React.ReactNode)\n}) {\n  const matchRoute = useMatchRoute<TGenerics>()\n  const match = matchRoute(rest)\n\n  if (typeof children === 'function') {\n    return children(match as any)\n  }\n\n  return match ? children : null\n}\n\nexport function usePrompt(message: string, when: boolean | any): void {\n  const location = useLocation()\n\n  React.useEffect(() => {\n    if (!when) return\n\n    let unblock = location.history.block((transition) => {\n      if (window.confirm(message)) {\n        unblock()\n        transition.retry()\n      } else {\n        location.current.pathname = window.location.pathname\n      }\n    })\n\n    return unblock\n  }, [when, location, message])\n}\n\nexport function Prompt({ message, when, children }: PromptProps) {\n  usePrompt(message, when ?? true)\n  return (children ?? null) as React.ReactNode\n}\n\nfunction warning(cond: boolean, message: string) {\n  if (!cond) {\n    if (typeof console !== 'undefined') console.warn(message)\n\n    try {\n      throw new Error(message)\n    } catch {}\n  }\n}\n\nfunction isFunction(d: any): d is Function {\n  return typeof d === 'function'\n}\n\nexport function functionalUpdate<TResult>(\n  updater?: Updater<TResult>,\n  previous?: TResult,\n) {\n  if (isFunction(updater)) {\n    return updater(previous as TResult)\n  }\n\n  return updater\n}\n\nfunction joinPaths(paths: (string | undefined)[]) {\n  return cleanPath(paths.filter(Boolean).join('/'))\n}\n\nexport function cleanPath(path: string) {\n  // remove double slashes\n  return `${path}`.replace(/\\/{2,}/g, '/')\n}\n\nexport function matchByPath<\n  TGenerics extends PartialGenerics = DefaultGenerics,\n>(\n  currentLocation: Location<TGenerics>,\n  matchLocation: MatchLocation<TGenerics>,\n): UseGeneric<TGenerics, 'Params'> | undefined {\n  const baseSegments = parsePathname(currentLocation.pathname)\n  const routeSegments = parsePathname(`${matchLocation.to ?? '*'}`)\n\n  const params: Record<string, string> = {}\n\n  let isMatch = (() => {\n    for (\n      let i = 0;\n      i < Math.max(baseSegments.length, routeSegments.length);\n      i++\n    ) {\n      const baseSegment = baseSegments[i]\n      const routeSegment = routeSegments[i]\n\n      const isLastRouteSegment = i === routeSegments.length - 1\n      const isLastBaseSegment = i === baseSegments.length - 1\n\n      if (routeSegment) {\n        if (routeSegment.type === 'wildcard') {\n          if (baseSegment?.value) {\n            params['*'] = joinPaths(baseSegments.slice(i).map((d) => d.value))\n            return true\n          }\n          return false\n        }\n\n        if (routeSegment.type === 'pathname') {\n          if (routeSegment.value === '/' && !baseSegment?.value) {\n            return true\n          }\n\n          if (baseSegment) {\n            if (matchLocation.caseSensitive) {\n              if (routeSegment.value !== baseSegment.value) {\n                return false\n              }\n            } else if (\n              routeSegment.value.toLowerCase() !==\n              baseSegment.value.toLowerCase()\n            ) {\n              return false\n            }\n          }\n        }\n\n        if (!baseSegment) {\n          return false\n        }\n\n        if (routeSegment.type === 'param') {\n          params[routeSegment.value.substring(1)] = baseSegment.value\n        }\n      }\n\n      if (isLastRouteSegment && !isLastBaseSegment) {\n        return !!matchLocation.fuzzy\n      }\n    }\n    return true\n  })()\n\n  return isMatch ? (params as UseGeneric<TGenerics, 'Params'>) : undefined\n}\n\nfunction matchBySearch<TGenerics extends PartialGenerics = DefaultGenerics>(\n  currentLocation: Location<TGenerics>,\n  matchLocation: MatchLocation<TGenerics>,\n) {\n  return !!(\n    matchLocation.search && matchLocation.search(currentLocation.search)\n  )\n}\n\nexport function parsePathname(pathname?: string): Segment[] {\n  if (!pathname) {\n    return []\n  }\n\n  pathname = cleanPath(pathname)\n\n  const segments: Segment[] = []\n\n  if (pathname.slice(0, 1) === '/') {\n    pathname = pathname.substring(1)\n    segments.push({\n      type: 'pathname',\n      value: '/',\n    })\n  }\n\n  if (!pathname) {\n    return segments\n  }\n\n  // Remove empty segments and '.' segments\n  const split = pathname.split('/').filter(Boolean)\n\n  segments.push(\n    ...split.map((part): Segment => {\n      if (part.startsWith('*')) {\n        return {\n          type: 'wildcard',\n          value: part,\n        }\n      }\n\n      if (part.charAt(0) === ':') {\n        return {\n          type: 'param',\n          value: part,\n        }\n      }\n\n      return {\n        type: 'pathname',\n        value: part,\n      }\n    }),\n  )\n\n  if (pathname.slice(-1) === '/') {\n    pathname = pathname.substring(1)\n    segments.push({\n      type: 'pathname',\n      value: '/',\n    })\n  }\n\n  return segments\n}\n\nexport function resolvePath(basepath: string, base: string, to: string) {\n  base = base.replace(new RegExp(`^${basepath}`), '/')\n  to = to.replace(new RegExp(`^${basepath}`), '/')\n\n  let baseSegments = parsePathname(base)\n  const toSegments = parsePathname(to)\n\n  toSegments.forEach((toSegment, index) => {\n    if (toSegment.value === '/') {\n      if (!index) {\n        // Leading slash\n        baseSegments = [toSegment]\n      } else if (index === toSegments.length - 1) {\n        // Trailing Slash\n        baseSegments.push(toSegment)\n      } else {\n        // ignore inter-slashes\n      }\n    } else if (toSegment.value === '..') {\n      baseSegments.pop()\n    } else if (toSegment.value === '.') {\n      return\n    } else {\n      baseSegments.push(toSegment)\n    }\n  })\n\n  const joined = joinPaths([basepath, ...baseSegments.map((d) => d.value)])\n\n  return cleanPath(joined)\n}\n\nfunction isCtrlEvent(e: React.MouseEvent) {\n  return !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)\n}\n\nfunction useLatestCallback<TCallback extends (...args: any[]) => any>(\n  cb: TCallback,\n) {\n  const stableFnRef =\n    React.useRef<(...args: Parameters<TCallback>) => ReturnType<TCallback>>()\n  const cbRef = React.useRef<TCallback>(cb)\n\n  cbRef.current = cb\n\n  if (!stableFnRef.current) {\n    stableFnRef.current = (...args) => cbRef.current(...args)\n  }\n\n  return stableFnRef.current\n}\n\nfunction useGetIsMounted() {\n  const ref = React.useRef(false)\n\n  React.useEffect(() => {\n    ref.current = true\n\n    return () => {\n      ref.current = false\n    }\n  })\n\n  return () => ref.current\n}\n\n/**\n * This function returns `a` if `b` is deeply equal.\n * If not, it will replace any deeply equal children of `b` with those of `a`.\n * This can be used for structural sharing between JSON values for example.\n */\nfunction replaceEqualDeep(prev: any, next: any) {\n  if (prev === next) {\n    return prev\n  }\n\n  const array = Array.isArray(prev) && Array.isArray(next)\n\n  if (array || (isPlainObject(prev) && isPlainObject(next))) {\n    const aSize = array ? prev.length : Object.keys(prev).length\n    const bItems = array ? next : Object.keys(next)\n    const bSize = bItems.length\n    const copy: any = array ? [] : {}\n\n    let equalItems = 0\n\n    for (let i = 0; i < bSize; i++) {\n      const key = array ? i : bItems[i]\n      copy[key] = replaceEqualDeep(prev[key], next[key])\n      if (copy[key] === prev[key]) {\n        equalItems++\n      }\n    }\n\n    return aSize === bSize && equalItems === aSize ? prev : copy\n  }\n\n  return next\n}\n\n// Copied from: https://github.com/jonschlinkert/is-plain-object\nfunction isPlainObject(o: any) {\n  if (!hasObjectPrototype(o)) {\n    return false\n  }\n\n  // If has modified constructor\n  const ctor = o.constructor\n  if (typeof ctor === 'undefined') {\n    return true\n  }\n\n  // If has modified prototype\n  const prot = ctor.prototype\n  if (!hasObjectPrototype(prot)) {\n    return false\n  }\n\n  // If constructor does not have an Object-specific method\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false\n  }\n\n  // Most likely a plain Object\n  return true\n}\n\nfunction hasObjectPrototype(o: any) {\n  return Object.prototype.toString.call(o) === '[object Object]'\n}\n\nexport function defaultStringifySearch(search: Record<string, unknown>) {\n  search = { ...search }\n\n  if (search) {\n    Object.keys(search).forEach((key) => {\n      const val = search[key]\n      if (typeof val === 'undefined' || val === undefined) {\n        delete search[key]\n      } else if (val && typeof val === 'object' && val !== null) {\n        try {\n          search[key] = JSON.stringify(val)\n        } catch (err) {\n          // silent\n        }\n      }\n    })\n  }\n\n  const searchStr = new URLSearchParams(\n    search as Record<string, string>,\n  ).toString()\n\n  return searchStr ? `?${searchStr}` : ''\n}\n\nexport function defaultParseSearch(searchStr: string): Record<string, any> {\n  if (searchStr.substring(0, 1) === '?') {\n    searchStr = searchStr.substring(1)\n  }\n\n  let query: Record<string, unknown> = Object.fromEntries(\n    (new URLSearchParams(searchStr) as any).entries(),\n  )\n\n  // Try to parse query params\n  for (let key in query) {\n    const value = query[key]\n\n    try {\n      query[key] = JSON.parse(value as string)\n    } catch (err) {\n      //\n    }\n  }\n\n  return query\n}\n"]},"metadata":{},"sourceType":"module"}